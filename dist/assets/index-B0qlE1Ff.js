var zn=Object.defineProperty;var Zn=(n,e,t)=>e in n?zn(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var b=(n,e,t)=>Zn(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();const pr=!1;var Kt=Array.isArray,Xn=Array.prototype.indexOf,Ht=Array.from,ei=Object.defineProperty,He=Object.getOwnPropertyDescriptor,ti=Object.prototype,ri=Array.prototype,ni=Object.getPrototypeOf;function ii(n){for(var e=0;e<n.length;e++)n[e]()}const B=2,qr=4,et=8,Jt=16,oe=32,tt=64,vt=128,ke=256,yt=512,j=1024,ue=2048,Ge=4096,te=8192,Be=16384,si=32768,zt=65536,ai=1<<19,Gr=1<<20,pt=Symbol("$state");function Br(n){return n===this.v}function oi(n,e){return n!=n?e==e:n!==e||n!==null&&typeof n=="object"||typeof n=="function"}function Wr(n){return!oi(n,this.v)}function ui(n){throw new Error("https://svelte.dev/e/effect_in_teardown")}function li(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ci(n){throw new Error("https://svelte.dev/e/effect_orphan")}function hi(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function di(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function fi(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function pi(){throw new Error("https://svelte.dev/e/state_unsafe_local_read")}function mi(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let gi=!1;const Zt=1,Xt=2,Vr=4,_i=8,vi=16,yi=2,D=Symbol();function V(n,e){var t={f:0,v:n,reactions:null,equals:Br,rv:0,wv:0};return t}function Z(n){return bi(V(n))}function wi(n,e=!1){const t=V(n);return e||(t.equals=Wr),t}function bi(n){return S!==null&&S.f&B&&(re===null?Li([n]):re.push(n)),n}function E(n,e){return S!==null&&dn()&&S.f&(B|Jt)&&(re===null||!re.includes(n))&&mi(),Nt(n,e)}function Nt(n,e){return n.equals(e)||(n.v,n.v=e,n.wv=hn(),Yr(n,ue),A!==null&&A.f&j&&!(A.f&(oe|tt))&&(se===null?ji([n]):se.push(n))),e}function Yr(n,e){var t=n.reactions;if(t!==null)for(var r=t.length,i=0;i<r;i++){var s=t[i],a=s.f;a&ue||(K(s,e),a&(j|ke)&&(a&B?Yr(s,Ge):Tt(s)))}}let Kr=!1;function x(n,e=null,t){if(typeof n!="object"||n===null||pt in n)return n;const r=ni(n);if(r!==ti&&r!==ri)return n;var i=new Map,s=Kt(n),a=V(0);s&&i.set("length",V(n.length));var d;return new Proxy(n,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&di();var c=i.get(l);return c===void 0?(c=V(u.value),i.set(l,c)):E(c,x(u.value,d)),!0},deleteProperty(o,l){var u=i.get(l);if(u===void 0)l in o&&i.set(l,V(D));else{if(s&&typeof l=="string"){var c=i.get("length"),f=Number(l);Number.isInteger(f)&&f<c.v&&E(c,f)}E(u,D),mr(a)}return!0},get(o,l,u){var m;if(l===pt)return n;var c=i.get(l),f=l in o;if(c===void 0&&(!f||(m=He(o,l))!=null&&m.writable)&&(c=V(x(f?o[l]:D,d)),i.set(l,c)),c!==void 0){var p=g(c);return p===D?void 0:p}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var c=i.get(l);c&&(u.value=g(c))}else if(u===void 0){var f=i.get(l),p=f==null?void 0:f.v;if(f!==void 0&&p!==D)return{enumerable:!0,configurable:!0,value:p,writable:!0}}return u},has(o,l){var p;if(l===pt)return!0;var u=i.get(l),c=u!==void 0&&u.v!==D||Reflect.has(o,l);if(u!==void 0||A!==null&&(!c||(p=He(o,l))!=null&&p.writable)){u===void 0&&(u=V(c?x(o[l],d):D),i.set(l,u));var f=g(u);if(f===D)return!1}return c},set(o,l,u,c){var R;var f=i.get(l),p=l in o;if(s&&l==="length")for(var m=u;m<f.v;m+=1){var _=i.get(m+"");_!==void 0?E(_,D):m in o&&(_=V(D),i.set(m+"",_))}f===void 0?(!p||(R=He(o,l))!=null&&R.writable)&&(f=V(void 0),E(f,x(u,d)),i.set(l,f)):(p=f.v!==D,E(f,x(u,d)));var y=Reflect.getOwnPropertyDescriptor(o,l);if(y!=null&&y.set&&y.set.call(c,u),!p){if(s&&typeof l=="string"){var w=i.get("length"),F=Number(l);Number.isInteger(F)&&F>=w.v&&E(w,F+1)}mr(a)}return!0},ownKeys(o){g(a);var l=Reflect.ownKeys(o).filter(f=>{var p=i.get(f);return p===void 0||p.v!==D});for(var[u,c]of i)c.v!==D&&!(u in o)&&l.push(u);return l},setPrototypeOf(){fi()}})}function mr(n,e=1){E(n,n.v+e)}var gr,Hr,Jr;function Ci(){if(gr===void 0){gr=window;var n=Element.prototype,e=Node.prototype;Hr=He(e,"firstChild").get,Jr=He(e,"nextSibling").get,n.__click=void 0,n.__className="",n.__attributes=null,n.__styles=null,n.__e=void 0,Text.prototype.__t=void 0}}function zr(n=""){return document.createTextNode(n)}function Zr(n){return Hr.call(n)}function er(n){return Jr.call(n)}function T(n,e){return Zr(n)}function P(n,e=1,t=!1){let r=n;for(;e--;)r=er(r);return r}function Mi(n){n.textContent=""}function ki(n){var e=B|ue;A===null?e|=ke:A.f|=Gr;var t=S!==null&&S.f&B?S:null;const r={children:null,ctx:O,deps:null,equals:Br,f:e,fn:n,reactions:null,rv:0,v:null,wv:0,parent:t??A};return t!==null&&(t.children??(t.children=[])).push(r),r}function Ii(n){const e=ki(n);return e.equals=Wr,e}function Xr(n){var e=n.children;if(e!==null){n.children=null;for(var t=0;t<e.length;t+=1){var r=e[t];r.f&B?tr(r):pe(r)}}}function Si(n){for(var e=n.parent;e!==null;){if(!(e.f&B))return e;e=e.parent}return null}function en(n){var e,t=A;ge(Si(n));try{Xr(n),e=pn(n)}finally{ge(t)}return e}function tn(n){var e=en(n),t=(be||n.f&ke)&&n.deps!==null?Ge:j;K(n,t),n.equals(e)||(n.v=e,n.wv=hn())}function tr(n){Xr(n),Xe(n,0),K(n,Be),n.v=n.children=n.deps=n.ctx=n.reactions=null}function Ti(n){A===null&&S===null&&ci(),S!==null&&S.f&ke&&li(),ar&&ui()}function Ei(n,e){var t=e.last;t===null?e.last=e.first=n:(t.next=n,n.prev=t,e.last=n)}function We(n,e,t,r=!0){var i=(n&tt)!==0,s=A,a={ctx:O,deps:null,deriveds:null,nodes_start:null,nodes_end:null,f:n|ue,first:null,fn:e,last:null,next:null,parent:i?null:s,prev:null,teardown:null,transitions:null,wv:0};if(t){var d=De;try{_r(!0),or(a),a.f|=si}catch(u){throw pe(a),u}finally{_r(d)}}else e!==null&&Tt(a);var o=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&(Gr|vt))===0;if(!o&&!i&&r&&(s!==null&&Ei(a,s),S!==null&&S.f&B)){var l=S;(l.children??(l.children=[])).push(a)}return a}function Ai(n){const e=We(et,null,!1);return K(e,j),e.teardown=n,e}function Fi(n){Ti();var e=A!==null&&(A.f&oe)!==0&&O!==null&&!O.m;if(e){var t=O;(t.e??(t.e=[])).push({fn:n,effect:A,reaction:S})}else{var r=rr(n);return r}}function Pi(n){const e=We(tt,n,!0);return(t={})=>new Promise(r=>{t.outro?wt(e,()=>{pe(e),r(void 0)}):(pe(e),r(void 0))})}function rr(n){return We(qr,n,!1)}function rn(n){return We(et,n,!0)}function Re(n){return nr(n)}function nr(n,e=0){return We(et|Jt|e,n,!0)}function Ze(n,e=!0){return We(et|oe,n,!0,e)}function nn(n){var e=n.teardown;if(e!==null){const t=ar,r=S;vr(!0),me(null);try{e.call(null)}finally{vr(t),me(r)}}}function sn(n){var e=n.deriveds;if(e!==null){n.deriveds=null;for(var t=0;t<e.length;t+=1)tr(e[t])}}function an(n,e=!1){var t=n.first;for(n.first=n.last=null;t!==null;){var r=t.next;pe(t,e),t=r}}function Ri(n){for(var e=n.first;e!==null;){var t=e.next;e.f&oe||pe(e),e=t}}function pe(n,e=!0){var t=!1;if((e||n.f&ai)&&n.nodes_start!==null){for(var r=n.nodes_start,i=n.nodes_end;r!==null;){var s=r===i?null:er(r);r.remove(),r=s}t=!0}an(n,e&&!t),sn(n),Xe(n,0),K(n,Be);var a=n.transitions;if(a!==null)for(const o of a)o.stop();nn(n);var d=n.parent;d!==null&&d.first!==null&&on(n),n.next=n.prev=n.teardown=n.ctx=n.deps=n.fn=n.nodes_start=n.nodes_end=null}function on(n){var e=n.parent,t=n.prev,r=n.next;t!==null&&(t.next=r),r!==null&&(r.prev=t),e!==null&&(e.first===n&&(e.first=r),e.last===n&&(e.last=t))}function wt(n,e){var t=[];ir(n,t,!0),un(t,()=>{pe(n),e&&e()})}function un(n,e){var t=n.length;if(t>0){var r=()=>--t||e();for(var i of n)i.out(r)}else e()}function ir(n,e,t){if(!(n.f&te)){if(n.f^=te,n.transitions!==null)for(const a of n.transitions)(a.is_global||t)&&e.push(a);for(var r=n.first;r!==null;){var i=r.next,s=(r.f&zt)!==0||(r.f&oe)!==0;ir(r,e,s?t:!1),r=i}}}function bt(n){ln(n,!0)}function ln(n,e){if(n.f&te){n.f^=te,n.f&j||(n.f^=j),rt(n)&&(K(n,ue),Tt(n));for(var t=n.first;t!==null;){var r=t.next,i=(t.f&zt)!==0||(t.f&oe)!==0;ln(t,i?e:!1),t=r}if(n.transitions!==null)for(const s of n.transitions)(s.is_global||e)&&s.in()}}let Dt=!1,$t=[];function xi(){Dt=!1;const n=$t.slice();$t=[],ii(n)}function sr(n){Dt||(Dt=!0,queueMicrotask(xi)),$t.push(n)}let mt=!1,Ct=!1,Mt=null,De=!1,ar=!1;function _r(n){De=n}function vr(n){ar=n}let Ut=[],Je=0;let S=null;function me(n){S=n}let A=null;function ge(n){A=n}let re=null;function Li(n){re=n}let Q=null,G=0,se=null;function ji(n){se=n}let cn=1,kt=0,be=!1,O=null;function hn(){return++cn}function dn(){return!0}function rt(n){var l;var e=n.f;if(e&ue)return!0;if(e&Ge){var t=n.deps,r=(e&ke)!==0;if(t!==null){var i,s,a=(e&yt)!==0,d=r&&A!==null&&!be,o=t.length;if(a||d){for(i=0;i<o;i++)s=t[i],(a||!((l=s==null?void 0:s.reactions)!=null&&l.includes(n)))&&(s.reactions??(s.reactions=[])).push(n);a&&(n.f^=yt)}for(i=0;i<o;i++)if(s=t[i],rt(s)&&tn(s),s.wv>n.wv)return!0}(!r||A!==null&&!be)&&K(n,j)}return!1}function Ni(n,e){for(var t=e;t!==null;){if(t.f&vt)try{t.fn(n);return}catch{t.f^=vt}t=t.parent}throw mt=!1,n}function Di(n){return(n.f&Be)===0&&(n.parent===null||(n.parent.f&vt)===0)}function St(n,e,t,r){if(mt){if(t===null&&(mt=!1),Di(e))throw n;return}t!==null&&(mt=!0);{Ni(n,e);return}}function fn(n,e,t=0){var r=n.reactions;if(r!==null)for(var i=0;i<r.length;i++){var s=r[i];s.f&B?fn(s,e,t+1):e===s&&(t===0?K(s,ue):s.f&j&&K(s,Ge),Tt(s))}}function pn(n){var f;var e=Q,t=G,r=se,i=S,s=be,a=re,d=O,o=n.f;Q=null,G=0,se=null,S=o&(oe|tt)?null:n,be=!De&&(o&ke)!==0,re=null,O=n.ctx,kt++;try{var l=(0,n.fn)(),u=n.deps;if(Q!==null){var c;if(Xe(n,G),u!==null&&G>0)for(u.length=G+Q.length,c=0;c<Q.length;c++)u[G+c]=Q[c];else n.deps=u=Q;if(!be)for(c=G;c<u.length;c++)((f=u[c]).reactions??(f.reactions=[])).push(n)}else u!==null&&G<u.length&&(Xe(n,G),u.length=G);if(dn()&&se!==null&&!(n.f&(B|Ge|ue)))for(c=0;c<se.length;c++)fn(se[c],n);return i!==null&&kt++,l}finally{Q=e,G=t,se=r,S=i,be=s,re=a,O=d}}function $i(n,e){let t=e.reactions;if(t!==null){var r=Xn.call(t,n);if(r!==-1){var i=t.length-1;i===0?t=e.reactions=null:(t[r]=t[i],t.pop())}}t===null&&e.f&B&&(Q===null||!Q.includes(e))&&(K(e,Ge),e.f&(ke|yt)||(e.f^=yt),Xe(e,0))}function Xe(n,e){var t=n.deps;if(t!==null)for(var r=e;r<t.length;r++)$i(n,t[r])}function or(n){var e=n.f;if(!(e&Be)){K(n,j);var t=A,r=O;A=n;try{e&Jt?Ri(n):an(n),sn(n),nn(n);var i=pn(n);n.teardown=typeof i=="function"?i:null,n.wv=cn;var s=n.deps,a;pr&&gi&&n.f&ue}catch(d){St(d,n,t,r||n.ctx)}finally{A=t}}}function Ui(){if(Je>1e3){Je=0;try{hi()}catch(n){if(Mt!==null)St(n,Mt,null);else throw n}}Je++}function Qi(n){var e=n.length;if(e!==0){Ui();var t=De;De=!0;try{for(var r=0;r<e;r++){var i=n[r];i.f&j||(i.f^=j);var s=[];mn(i,s),Oi(s)}}finally{De=t}}}function Oi(n){var e=n.length;if(e!==0)for(var t=0;t<e;t++){var r=n[t];if(!(r.f&(Be|te)))try{rt(r)&&(or(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null?on(r):r.fn=null))}catch(i){St(i,r,null,r.ctx)}}}function qi(){if(Ct=!1,Je>1001)return;const n=Ut;Ut=[],Qi(n),Ct||(Je=0,Mt=null)}function Tt(n){Ct||(Ct=!0,queueMicrotask(qi)),Mt=n;for(var e=n;e.parent!==null;){e=e.parent;var t=e.f;if(t&(tt|oe)){if(!(t&j))return;e.f^=j}}Ut.push(e)}function mn(n,e){var t=n.first,r=[];e:for(;t!==null;){var i=t.f,s=(i&oe)!==0,a=s&&(i&j)!==0,d=t.next;if(!a&&!(i&te))if(i&et){if(s)t.f^=j;else try{rt(t)&&or(t)}catch(c){St(c,t,null,t.ctx)}var o=t.first;if(o!==null){t=o;continue}}else i&qr&&r.push(t);if(d===null){let c=t.parent;for(;c!==null;){if(n===c)break e;var l=c.next;if(l!==null){t=l;continue e}c=c.parent}}t=d}for(var u=0;u<r.length;u++)o=r[u],e.push(o),mn(o,e)}function g(n){var u;var e=n.f,t=(e&B)!==0;if(t&&e&Be){var r=en(n);return tr(n),r}if(S!==null){re!==null&&re.includes(n)&&pi();var i=S.deps;n.rv<kt&&(n.rv=kt,Q===null&&i!==null&&i[G]===n?G++:Q===null?Q=[n]:Q.push(n))}else if(t&&n.deps===null)for(var s=n,a=s.parent,d=s;a!==null;)if(a.f&B){var o=a;d=o,a=o.parent}else{var l=a;(u=l.deriveds)!=null&&u.includes(d)||(l.deriveds??(l.deriveds=[])).push(d);break}return t&&(s=n,rt(s)&&tn(s)),n.v}function gn(n){const e=S;try{return S=null,n()}finally{S=e}}const Gi=-7169;function K(n,e){n.f=n.f&Gi|e}function _n(n,e=!1,t){O={p:O,c:null,e:null,m:!1,s:n,x:null,l:null}}function vn(n){const e=O;if(e!==null){const a=e.e;if(a!==null){var t=A,r=S;e.e=null;try{for(var i=0;i<a.length;i++){var s=a[i];ge(s.effect),me(s.reaction),rr(s.fn)}}finally{ge(t),me(r)}}O=e.p,e.m=!0}return{}}const Bi=["touchstart","touchmove"];function Wi(n){return Bi.includes(n)}let yr=!1;function Vi(){yr||(yr=!0,document.addEventListener("reset",n=>{Promise.resolve().then(()=>{var e;if(!n.defaultPrevented)for(const t of n.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function yn(n){var e=S,t=A;me(null),ge(null);try{return n()}finally{me(e),ge(t)}}function Yi(n,e,t,r=t){n.addEventListener(e,()=>yn(t));const i=n.__on_r;i?n.__on_r=()=>{i(),r(!0)}:n.__on_r=()=>r(!0),Vi()}const wn=new Set,Qt=new Set;function Ki(n,e,t,r){function i(s){if(r.capture||Ke.call(e,s),!s.cancelBubble)return yn(()=>t.call(this,s))}return n.startsWith("pointer")||n.startsWith("touch")||n==="wheel"?sr(()=>{e.addEventListener(n,i,r)}):e.addEventListener(n,i,r),i}function wr(n,e,t,r,i){var s={capture:r,passive:i},a=Ki(n,e,t,s);(e===document.body||e===window||e===document)&&Ai(()=>{e.removeEventListener(n,a,s)})}function Hi(n){for(var e=0;e<n.length;e++)wn.add(n[e]);for(var t of Qt)t(n)}function Ke(n){var F;var e=this,t=e.ownerDocument,r=n.type,i=((F=n.composedPath)==null?void 0:F.call(n))||[],s=i[0]||n.target,a=0,d=n.__root;if(d){var o=i.indexOf(d);if(o!==-1&&(e===document||e===window)){n.__root=e;return}var l=i.indexOf(e);if(l===-1)return;o<=l&&(a=o)}if(s=i[a]||n.target,s!==e){ei(n,"currentTarget",{configurable:!0,get(){return s||t}});var u=S,c=A;me(null),ge(null);try{for(var f,p=[];s!==null;){var m=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];if(_!==void 0&&!s.disabled)if(Kt(_)){var[y,...w]=_;y.apply(s,[n,...w])}else _.call(s,n)}catch(R){f?p.push(R):f=R}if(n.cancelBubble||m===e||m===null)break;s=m}if(f){for(let R of p)queueMicrotask(()=>{throw R});throw f}}finally{n.__root=e,delete n.currentTarget,me(u),ge(c)}}}function Ji(n){var e=document.createElement("template");return e.innerHTML=n,e.content}function zi(n,e){var t=A;t.nodes_start===null&&(t.nodes_start=n,t.nodes_end=e)}function Ie(n,e){var t=(e&yi)!==0,r,i=!n.startsWith("<!>");return()=>{r===void 0&&(r=Ji(i?n:"<!>"+n),r=Zr(r));var s=t?document.importNode(r,!0):r.cloneNode(!0);return zi(s,s),s}}function _e(n,e){n!==null&&n.before(e)}function Y(n,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(n.__t??(n.__t=n.nodeValue))&&(n.__t=t,n.nodeValue=t==null?"":t+"")}function Zi(n,e){return Xi(n,e)}const xe=new Map;function Xi(n,{target:e,anchor:t,props:r={},events:i,context:s,intro:a=!0}){Ci();var d=new Set,o=c=>{for(var f=0;f<c.length;f++){var p=c[f];if(!d.has(p)){d.add(p);var m=Wi(p);e.addEventListener(p,Ke,{passive:m});var _=xe.get(p);_===void 0?(document.addEventListener(p,Ke,{passive:m}),xe.set(p,1)):xe.set(p,_+1)}}};o(Ht(wn)),Qt.add(o);var l=void 0,u=Pi(()=>{var c=t??e.appendChild(zr());return Ze(()=>{if(s){_n({});var f=O;f.c=s}i&&(r.$$events=i),l=n(c,r)||{},s&&vn()}),()=>{var m;for(var f of d){e.removeEventListener(f,Ke);var p=xe.get(f);--p===0?(document.removeEventListener(f,Ke),xe.delete(f)):xe.set(f,p)}Qt.delete(o),c!==t&&((m=c.parentNode)==null||m.removeChild(c))}});return es.set(l,u),l}let es=new WeakMap;function ct(n,e,t=!1){var r=n,i=null,s=null,a=D,d=t?zt:0,o=!1;const l=(c,f=!0)=>{o=!0,u(f,c)},u=(c,f)=>{a!==(a=c)&&(a?(i?bt(i):f&&(i=Ze(()=>f(r))),s&&wt(s,()=>{s=null})):(s?bt(s):f&&(s=Ze(()=>f(r))),i&&wt(i,()=>{i=null})))};nr(()=>{o=!1,e(l),o||u(null,null)},d)}function br(n,e){return e}function ts(n,e,t,r){for(var i=[],s=e.length,a=0;a<s;a++)ir(e[a].e,i,!0);var d=s>0&&i.length===0&&t!==null;if(d){var o=t.parentNode;Mi(o),o.append(t),r.clear(),fe(n,e[0].prev,e[s-1].next)}un(i,()=>{for(var l=0;l<s;l++){var u=e[l];d||(r.delete(u.k),fe(n,u.prev,u.next)),pe(u.e,!d)}})}function Cr(n,e,t,r,i,s=null){var a=n,d={flags:e,items:new Map,first:null},o=(e&Vr)!==0;if(o){var l=n;a=l.appendChild(zr())}var u=null,c=!1,f=Ii(()=>{var p=t();return Kt(p)?p:p==null?[]:Ht(p)});nr(()=>{var p=g(f),m=p.length;if(!(c&&m===0)){c=m===0;{var _=S;rs(p,d,a,i,e,(_.f&te)!==0,r)}s!==null&&(m===0?u?bt(u):u=Ze(()=>s(a)):u!==null&&wt(u,()=>{u=null})),g(f)}})}function rs(n,e,t,r,i,s,a,d){var it,st,at,Ve;var o=(i&_i)!==0,l=(i&(Zt|Xt))!==0,u=n.length,c=e.items,f=e.first,p=f,m,_=null,y,w=[],F=[],R,L,M,k;if(o)for(k=0;k<u;k+=1)R=n[k],L=a(R,k),M=c.get(L),M!==void 0&&((it=M.a)==null||it.measure(),(y??(y=new Set)).add(M));for(k=0;k<u;k+=1){if(R=n[k],L=a(R,k),M=c.get(L),M===void 0){var H=p?p.e.nodes_start:t;_=is(H,e,_,_===null?e.first:_.next,R,L,k,r,i),c.set(L,_),w=[],F=[],p=_.next;continue}if(l&&ns(M,R,k,i),M.e.f&te&&(bt(M.e),o&&((st=M.a)==null||st.unfix(),(y??(y=new Set)).delete(M))),M!==p){if(m!==void 0&&m.has(M)){if(w.length<F.length){var ne=F[0],q;_=ne.prev;var Te=w[0],Ee=w[w.length-1];for(q=0;q<w.length;q+=1)Mr(w[q],ne,t);for(q=0;q<F.length;q+=1)m.delete(F[q]);fe(e,Te.prev,Ee.next),fe(e,_,Te),fe(e,Ee,ne),p=ne,_=Ee,k-=1,w=[],F=[]}else m.delete(M),Mr(M,p,t),fe(e,M.prev,M.next),fe(e,M,_===null?e.first:_.next),fe(e,_,M),_=M;continue}for(w=[],F=[];p!==null&&p.k!==L;)(s||!(p.e.f&te))&&(m??(m=new Set)).add(p),F.push(p),p=p.next;if(p===null)continue;M=p}w.push(M),_=M,p=M.next}if(p!==null||m!==void 0){for(var le=m===void 0?[]:Ht(m);p!==null;)(s||!(p.e.f&te))&&le.push(p),p=p.next;var Ae=le.length;if(Ae>0){var nt=i&Vr&&u===0?t:null;if(o){for(k=0;k<Ae;k+=1)(at=le[k].a)==null||at.measure();for(k=0;k<Ae;k+=1)(Ve=le[k].a)==null||Ve.fix()}ts(e,le,nt,c)}}o&&sr(()=>{var ot;if(y!==void 0)for(M of y)(ot=M.a)==null||ot.apply()}),A.first=e.first&&e.first.e,A.last=_&&_.e}function ns(n,e,t,r){r&Zt&&Nt(n.v,e),r&Xt?Nt(n.i,t):n.i=t}function is(n,e,t,r,i,s,a,d,o,l){var u=(o&Zt)!==0,c=(o&vi)===0,f=u?c?wi(i):V(i):i,p=o&Xt?V(a):a,m={i:p,v:f,k:s,a:null,e:null,prev:t,next:r};try{return m.e=Ze(()=>d(n,f,p),Kr),m.e.prev=t&&t.e,m.e.next=r&&r.e,t===null?e.first=m:(t.next=m,t.e.next=m.e),r!==null&&(r.prev=m,r.e.prev=m.e),m}finally{}}function Mr(n,e,t){for(var r=n.next?n.next.e.nodes_start:t,i=e?e.e.nodes_start:t,s=n.e.nodes_start;s!==r;){var a=er(s);i.before(s),s=a}}function fe(n,e,t){e===null?n.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function Le(n,e,t){var r=n.__className,i=ss(e);(r!==i||Kr)&&(e==null?n.removeAttribute("class"):n.className=i,n.__className=i)}function ss(n,e){return(n??"")+""}function kr(n,e,t=e){Yi(n,"input",r=>{var i=r?n.defaultValue:n.value;if(i=Ft(n)?Pt(i):i,t(i),i!==(i=e())){var s=n.selectionStart,a=n.selectionEnd;n.value=i??"",a!==null&&(n.selectionStart=s,n.selectionEnd=Math.min(a,n.value.length))}}),gn(e)==null&&n.value&&t(Ft(n)?Pt(n.value):n.value),rn(()=>{var r=e();Ft(n)&&r===Pt(n.value)||n.type==="date"&&!r&&!n.value||r!==n.value&&(n.value=r??"")})}function Ft(n){var e=n.type;return e==="number"||e==="range"}function Pt(n){return n===""?null:+n}function Ir(n,e){return n===e||(n==null?void 0:n[pt])===e}function as(n={},e,t,r){return rr(()=>{var i,s;return rn(()=>{i=s,s=[],gn(()=>{n!==t(...s)&&(e(n,...s),i&&Ir(t(...i),n)&&e(null,...i))})}),()=>{sr(()=>{s&&Ir(t(...s),n)&&e(null,...s)})}}),n}const os="5";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(os);const Sr=new Map;function us(n){const e=Array.isArray(n)?n:[n],t=e.join(","),r=Sr.get(t)??(()=>{const i=bn(e),s=ls(i);return Sr.set(t,s),s})();return i=>r(i)}function bn(n){return Array.isArray(n)?n.map(e=>e.split(":")):[n.split(":")]}function ls(n){const e=n.flatMap(i=>cs(i,Cn(i))),t=ds(e),r=fs(t);return i=>!!r(i.update,i)}function Cn(n){const e=gt,t=[n].flatMap(r=>{const[i,s,a]=r;if(!(i in xr))return[r];if(!i&&!s&&!a)return[r];const o=xr[i].map(l=>[l,s,a]);return s===void 0||s in xt&&(s||a)?o:o.filter(([l])=>{var u;return!!((u=e[l])!=null&&u[s])})}).flatMap(r=>{const[i,s,a]=r;if(!(s in xt))return[r];if(!s&&!a)return[r];const o=xt[s].map(l=>[i,l,a]);return a===void 0?o:o.filter(([,l])=>{var u,c;return!!((c=(u=e[i])==null?void 0:u[l])!=null&&c[a])})});if(t.length===0)throw new Error(`Shortcuts in '${n.join(":")}' do not expand to any valid filter query`);return t}function cs(n,e){if(e.length===0)throw new Error("Empty filter query given");const t=e.map(hs).filter(r=>r!==!0);if(t.length===0)return e;throw t.length===1?new Error(t[0]):new Error(`Invalid filter query '${n.join(":")}'. There are ${t.length} errors after expanding the contained shortcuts: ${t.join("; ")}`)}function hs(n){const[e,t,r,...i]=n;if(e===void 0)return"Empty filter query given";if(!(e in gt)){const d=Object.keys(gt);return`Invalid L1 filter '${e}' given in '${n.join(":")}'. Permitted values are: ${d.map(o=>`'${o}'`).join(", ")}.`}if(t===void 0)return!0;const s=gt[e];if(!(t in s)){const d=Object.keys(s);return`Invalid L2 filter '${t}' given in '${n.join(":")}'. Permitted values are: ${d.map(o=>`'${o}'`).join(", ")}.`}if(r===void 0)return!0;const a=s[t];if(!(r in a)){const d=Object.keys(a);return`Invalid L3 filter '${r}' given in '${n.join(":")}'. ${d.length===0?`No further filtering is possible after '${e}:${t}'.`:`Permitted values are: ${d.map(o=>`'${o}'`).join(", ")}.`}`}return i.length===0?!0:`Cannot filter further than three levels, ':${i.join(":")}' is invalid!`}function ds(n){const e={};for(const[t,r,i]of n){const s=e[t]??(e[t]={});if(r!==void 0){const a=s[r]??(s[r]=new Set);i!==void 0&&a.add(i)}}return e}function Rt(n,e){return(t,r)=>n(t,r)||e(t,r)}function Tr(n,e){return(t,r)=>{const i=n(t,r);return i&&e(i,r)}}function Er(n){return(e,t)=>n(e,t)!=null}function fs(n){const e=Object.entries(n).map(([t,r])=>{const i=a=>a[t],s=Object.entries(r).map(([a,d])=>{const o=u=>u[a],l=Array.from(d).map(u=>u==="me"?(f,p)=>{const m=p.me.id;return Ar(f,_=>_.id===m)}:f=>Ar(f,p=>p[u]||p.type===u));return l.length===0?Er(o):Tr(o,l.reduce(Rt))});return s.length===0?Er(i):Tr(i,s.reduce(Rt))});if(e.length===0)throw new Error("Cannot create filter function for empty query");return e.reduce(Rt)}function Ar(n,e){const t=r=>r!=null&&e(r);return Array.isArray(n)?n.some(t):t(n)}const Fr={mention:{},hashtag:{},cashtag:{},bot_command:{},url:{},email:{},phone_number:{},bold:{},italic:{},underline:{},strikethrough:{},spoiler:{},blockquote:{},expandable_blockquote:{},code:{},pre:{},text_link:{},text_mention:{},custom_emoji:{}},Ot={me:{},is_bot:{},is_premium:{},added_to_attachment_menu:{}},ps={user:{},hidden_user:{},chat:{},channel:{}},ms={is_video:{},is_animated:{},premium_animation:{}},qt={emoji:{},custom_emoji:{},paid:{}},Mn={forward_origin:ps,is_topic_message:{},is_automatic_forward:{},business_connection_id:{},text:{},animation:{},audio:{},document:{},paid_media:{},photo:{},sticker:ms,story:{},video:{},video_note:{},voice:{},contact:{},dice:{},game:{},poll:{},venue:{},location:{},entities:Fr,caption_entities:Fr,caption:{},effect_id:{},has_media_spoiler:{},new_chat_title:{},new_chat_photo:{},delete_chat_photo:{},message_auto_delete_timer_changed:{},pinned_message:{},invoice:{},proximity_alert_triggered:{},chat_background_set:{},giveaway_created:{},giveaway:{only_new_members:{},has_public_winners:{}},giveaway_winners:{only_new_members:{},was_refunded:{}},giveaway_completed:{},video_chat_scheduled:{},video_chat_started:{},video_chat_ended:{},video_chat_participants_invited:{},web_app_data:{}},ht={...Mn,new_chat_members:Ot,left_chat_member:Ot,group_chat_created:{},supergroup_chat_created:{},migrate_to_chat_id:{},migrate_from_chat_id:{},successful_payment:{},refunded_payment:{},users_shared:{},chat_shared:{},connected_website:{},write_access_allowed:{},passport_data:{},boost_added:{},forum_topic_created:{},forum_topic_edited:{name:{},icon_custom_emoji_id:{}},forum_topic_closed:{},forum_topic_reopened:{},general_forum_topic_hidden:{},general_forum_topic_unhidden:{},sender_boost_count:{}},Pr={...Mn,channel_chat_created:{}},gs={can_reply:{},is_enabled:{}},_s={old_reaction:qt,new_reaction:qt},vs={reactions:qt},ys={data:{},game_short_name:{}},Rr={from:Ot},gt={message:ht,edited_message:ht,channel_post:Pr,edited_channel_post:Pr,business_connection:gs,business_message:ht,edited_business_message:ht,deleted_business_messages:{},inline_query:{},chosen_inline_result:{},callback_query:ys,shipping_query:{},pre_checkout_query:{},poll:{},poll_answer:{},my_chat_member:Rr,chat_member:Rr,chat_join_request:{},message_reaction:_s,message_reaction_count:vs,chat_boost:{},removed_chat_boost:{},purchased_paid_media:{}},xr={"":["message","channel_post"],msg:["message","channel_post"],edit:["edited_message","edited_channel_post"]},xt={"":["entities","caption_entities"],media:["photo","video"],file:["photo","animation","audio","document","video","video_note","voice","sticker"]},ee={filterQuery(n){const e=us(n);return t=>e(t)},text(n){const e=ee.filterQuery([":text",":caption"]),t=ve(n);return r=>{if(!e(r))return!1;const i=r.message??r.channelPost,s=i.text??i.caption;return ye(r,s,t)}},command(n){const e=ee.filterQuery(":entities:bot_command"),t=new Set,r=new Set;return It(n).forEach(i=>{if(i.startsWith("/"))throw new Error(`Do not include '/' when registering command handlers (use '${i.substring(1)}' not '${i}')`);(i.includes("@")?t:r).add(i)}),i=>{if(!e(i))return!1;const s=i.message??i.channelPost,a=s.text??s.caption;return s.entities.some(d=>{if(d.type!=="bot_command"||d.offset!==0)return!1;const o=a.substring(1,d.length);if(r.has(o)||t.has(o))return i.match=a.substring(o.length+1).trimStart(),!0;const l=o.indexOf("@");if(l===-1)return!1;const u=o.substring(l+1).toLowerCase(),c=i.me.username.toLowerCase();if(u!==c)return!1;const f=o.substring(0,l);return r.has(f)?(i.match=a.substring(o.length+1).trimStart(),!0):!1})}},reaction(n){const e=ee.filterQuery("message_reaction"),t=typeof n=="string"?[{type:"emoji",emoji:n}]:(Array.isArray(n)?n:[n]).map(a=>typeof a=="string"?{type:"emoji",emoji:a}:a),r=new Set(t.filter(a=>a.type==="emoji").map(a=>a.emoji)),i=new Set(t.filter(a=>a.type==="custom_emoji").map(a=>a.custom_emoji_id)),s=t.some(a=>a.type==="paid");return a=>{if(!e(a))return!1;const{old_reaction:d,new_reaction:o}=a.messageReaction;for(const l of o){let u=!1;if(l.type==="emoji"){for(const c of d)if(c.type==="emoji"&&c.emoji===l.emoji){u=!0;break}}else if(l.type==="custom_emoji"){for(const c of d)if(c.type==="custom_emoji"&&c.custom_emoji_id===l.custom_emoji_id){u=!0;break}}else if(l.type==="paid"){for(const c of d)if(c.type==="paid"){u=!0;break}}if(!u)if(l.type==="emoji"){if(r.has(l.emoji))return!0}else if(l.type==="custom_emoji"){if(i.has(l.custom_emoji_id))return!0}else if(l.type==="paid"){if(s)return!0}else return!0}return!1}},chatType(n){const e=new Set(It(n));return t=>{var r;return((r=t.chat)==null?void 0:r.type)!==void 0&&e.has(t.chat.type)}},callbackQuery(n){const e=ee.filterQuery("callback_query:data"),t=ve(n);return r=>e(r)&&ye(r,r.callbackQuery.data,t)},gameQuery(n){const e=ee.filterQuery("callback_query:game_short_name"),t=ve(n);return r=>e(r)&&ye(r,r.callbackQuery.game_short_name,t)},inlineQuery(n){const e=ee.filterQuery("inline_query"),t=ve(n);return r=>e(r)&&ye(r,r.inlineQuery.query,t)},chosenInlineResult(n){const e=ee.filterQuery("chosen_inline_result"),t=ve(n);return r=>e(r)&&ye(r,r.chosenInlineResult.result_id,t)},preCheckoutQuery(n){const e=ee.filterQuery("pre_checkout_query"),t=ve(n);return r=>e(r)&&ye(r,r.preCheckoutQuery.invoice_payload,t)},shippingQuery(n){const e=ee.filterQuery("shipping_query"),t=ve(n);return r=>e(r)&&ye(r,r.shippingQuery.invoice_payload,t)}},$=class ${constructor(e,t,r){b(this,"update");b(this,"api");b(this,"me");b(this,"match");this.update=e,this.api=t,this.me=r}get message(){return this.update.message}get editedMessage(){return this.update.edited_message}get channelPost(){return this.update.channel_post}get editedChannelPost(){return this.update.edited_channel_post}get businessConnection(){return this.update.business_connection}get businessMessage(){return this.update.business_message}get editedBusinessMessage(){return this.update.edited_business_message}get deletedBusinessMessages(){return this.update.deleted_business_messages}get messageReaction(){return this.update.message_reaction}get messageReactionCount(){return this.update.message_reaction_count}get inlineQuery(){return this.update.inline_query}get chosenInlineResult(){return this.update.chosen_inline_result}get callbackQuery(){return this.update.callback_query}get shippingQuery(){return this.update.shipping_query}get preCheckoutQuery(){return this.update.pre_checkout_query}get poll(){return this.update.poll}get pollAnswer(){return this.update.poll_answer}get myChatMember(){return this.update.my_chat_member}get chatMember(){return this.update.chat_member}get chatJoinRequest(){return this.update.chat_join_request}get chatBoost(){return this.update.chat_boost}get removedChatBoost(){return this.update.removed_chat_boost}get purchasedPaidMedia(){return this.update.purchased_paid_media}get msg(){var e;return this.message??this.editedMessage??this.channelPost??this.editedChannelPost??this.businessMessage??this.editedBusinessMessage??((e=this.callbackQuery)==null?void 0:e.message)}get chat(){var e;return(e=this.msg??this.deletedBusinessMessages??this.messageReaction??this.messageReactionCount??this.myChatMember??this.chatMember??this.chatJoinRequest??this.chatBoost??this.removedChatBoost)==null?void 0:e.chat}get senderChat(){var e;return(e=this.msg)==null?void 0:e.sender_chat}get from(){var e,t,r,i;return((r=this.businessConnection??this.messageReaction??((t=((e=this.chatBoost)==null?void 0:e.boost)??this.removedChatBoost)==null?void 0:t.source))==null?void 0:r.user)??((i=this.callbackQuery??this.msg??this.inlineQuery??this.chosenInlineResult??this.shippingQuery??this.preCheckoutQuery??this.myChatMember??this.chatMember??this.chatJoinRequest??this.purchasedPaidMedia)==null?void 0:i.from)}get msgId(){var e,t,r;return((e=this.msg)==null?void 0:e.message_id)??((t=this.messageReaction)==null?void 0:t.message_id)??((r=this.messageReactionCount)==null?void 0:r.message_id)}get chatId(){var e,t;return((e=this.chat)==null?void 0:e.id)??((t=this.businessConnection)==null?void 0:t.user_chat_id)}get inlineMessageId(){var e,t;return((e=this.callbackQuery)==null?void 0:e.inline_message_id)??((t=this.chosenInlineResult)==null?void 0:t.inline_message_id)}get businessConnectionId(){var e,t,r;return((e=this.msg)==null?void 0:e.business_connection_id)??((t=this.businessConnection)==null?void 0:t.id)??((r=this.deletedBusinessMessages)==null?void 0:r.business_connection_id)}entities(e){const t=this.msg;if(t===void 0)return[];const r=t.text??t.caption;if(r===void 0)return[];let i=t.entities??t.caption_entities;if(i===void 0)return[];if(e!==void 0){const s=new Set(It(e));i=i.filter(a=>s.has(a.type))}return i.map(s=>({...s,text:r.substring(s.offset,s.offset+s.length)}))}reactions(){const e=[],t=[],r=[],i=[],s=[],a=[],d=[],o=[];let l=!1,u=!1;const c=this.messageReaction;if(c!==void 0){const{old_reaction:f,new_reaction:p}=c;for(const m of p)m.type==="emoji"?e.push(m.emoji):m.type==="custom_emoji"?s.push(m.custom_emoji_id):m.type==="paid"&&(l=u=!0);for(const m of f)m.type==="emoji"?i.push(m.emoji):m.type==="custom_emoji"?o.push(m.custom_emoji_id):m.type==="paid"&&(u=!1);t.push(...e),a.push(...s);for(let m=0;m<i.length;m++){const _=t.length;if(_===0)break;const y=i[m];for(let w=0;w<_;w++)if(y===t[w]){r.push(y),i.splice(m,1),t.splice(w,1),m--;break}}for(let m=0;m<o.length;m++){const _=a.length;if(_===0)break;const y=o[m];for(let w=0;w<_;w++)if(y===a[w]){d.push(y),o.splice(m,1),a.splice(w,1),m--;break}}}return{emoji:e,emojiAdded:t,emojiKept:r,emojiRemoved:i,customEmoji:s,customEmojiAdded:a,customEmojiKept:d,customEmojiRemoved:o,paid:l,paidAdded:u}}has(e){return $.has.filterQuery(e)(this)}hasText(e){return $.has.text(e)(this)}hasCommand(e){return $.has.command(e)(this)}hasReaction(e){return $.has.reaction(e)(this)}hasChatType(e){return $.has.chatType(e)(this)}hasCallbackQuery(e){return $.has.callbackQuery(e)(this)}hasGameQuery(e){return $.has.gameQuery(e)(this)}hasInlineQuery(e){return $.has.inlineQuery(e)(this)}hasChosenInlineResult(e){return $.has.chosenInlineResult(e)(this)}hasPreCheckoutQuery(e){return $.has.preCheckoutQuery(e)(this)}hasShippingQuery(e){return $.has.shippingQuery(e)(this)}reply(e,t,r){return this.api.sendMessage(h(this.chatId,"sendMessage"),e,{business_connection_id:this.businessConnectionId,...t},r)}forwardMessage(e,t,r){return this.api.forwardMessage(e,h(this.chatId,"forwardMessage"),h(this.msgId,"forwardMessage"),t,r)}forwardMessages(e,t,r,i){return this.api.forwardMessages(e,h(this.chatId,"forwardMessages"),t,r,i)}copyMessage(e,t,r){return this.api.copyMessage(e,h(this.chatId,"copyMessage"),h(this.msgId,"copyMessage"),t,r)}copyMessages(e,t,r,i){return this.api.copyMessages(e,h(this.chatId,"copyMessages"),t,r,i)}replyWithPhoto(e,t,r){return this.api.sendPhoto(h(this.chatId,"sendPhoto"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAudio(e,t,r){return this.api.sendAudio(h(this.chatId,"sendAudio"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithDocument(e,t,r){return this.api.sendDocument(h(this.chatId,"sendDocument"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideo(e,t,r){return this.api.sendVideo(h(this.chatId,"sendVideo"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithAnimation(e,t,r){return this.api.sendAnimation(h(this.chatId,"sendAnimation"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVoice(e,t,r){return this.api.sendVoice(h(this.chatId,"sendVoice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithVideoNote(e,t,r){return this.api.sendVideoNote(h(this.chatId,"sendVideoNote"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithMediaGroup(e,t,r){return this.api.sendMediaGroup(h(this.chatId,"sendMediaGroup"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithLocation(e,t,r,i){return this.api.sendLocation(h(this.chatId,"sendLocation"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}editMessageLiveLocation(e,t,r,i){const s=this.inlineMessageId;return s!==void 0?this.api.editMessageLiveLocationInline(s,e,t,r):this.api.editMessageLiveLocation(h(this.chatId,"editMessageLiveLocation"),h(this.msgId,"editMessageLiveLocation"),e,t,r,i)}stopMessageLiveLocation(e,t){const r=this.inlineMessageId;return r!==void 0?this.api.stopMessageLiveLocationInline(r,e):this.api.stopMessageLiveLocation(h(this.chatId,"stopMessageLiveLocation"),h(this.msgId,"stopMessageLiveLocation"),e,t)}sendPaidMedia(e,t,r,i){return this.api.sendPaidMedia(h(this.chatId,"sendPaidMedia"),e,t,r,i)}replyWithVenue(e,t,r,i,s,a){return this.api.sendVenue(h(this.chatId,"sendVenue"),e,t,r,i,{business_connection_id:this.businessConnectionId,...s},a)}replyWithContact(e,t,r,i){return this.api.sendContact(h(this.chatId,"sendContact"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}replyWithPoll(e,t,r,i){return this.api.sendPoll(h(this.chatId,"sendPoll"),e,t,{business_connection_id:this.businessConnectionId,...r},i)}replyWithDice(e,t,r){return this.api.sendDice(h(this.chatId,"sendDice"),e,{business_connection_id:this.businessConnectionId,...t},r)}replyWithChatAction(e,t,r){return this.api.sendChatAction(h(this.chatId,"sendChatAction"),e,{business_connection_id:this.businessConnectionId,...t},r)}react(e,t,r){return this.api.setMessageReaction(h(this.chatId,"setMessageReaction"),h(this.msgId,"setMessageReaction"),typeof e=="string"?[{type:"emoji",emoji:e}]:(Array.isArray(e)?e:[e]).map(i=>typeof i=="string"?{type:"emoji",emoji:i}:i),t,r)}getUserProfilePhotos(e,t){return this.api.getUserProfilePhotos(h(this.from,"getUserProfilePhotos").id,e,t)}setUserEmojiStatus(e,t){return this.api.setUserEmojiStatus(h(this.from,"setUserEmojiStatus").id,e,t)}getUserChatBoosts(e,t){return this.api.getUserChatBoosts(e,h(this.from,"getUserChatBoosts").id,t)}getBusinessConnection(e){return this.api.getBusinessConnection(h(this.businessConnectionId,"getBusinessConnection"),e)}getFile(e){const t=h(this.msg,"getFile"),r=t.photo!==void 0?t.photo[t.photo.length-1]:t.animation??t.audio??t.document??t.video??t.video_note??t.voice??t.sticker;return this.api.getFile(h(r,"getFile").file_id,e)}kickAuthor(...e){return this.banAuthor(...e)}banAuthor(e,t){return this.api.banChatMember(h(this.chatId,"banAuthor"),h(this.from,"banAuthor").id,e,t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r){return this.api.banChatMember(h(this.chatId,"banChatMember"),e,t,r)}unbanChatMember(e,t,r){return this.api.unbanChatMember(h(this.chatId,"unbanChatMember"),e,t,r)}restrictAuthor(e,t,r){return this.api.restrictChatMember(h(this.chatId,"restrictAuthor"),h(this.from,"restrictAuthor").id,e,t,r)}restrictChatMember(e,t,r,i){return this.api.restrictChatMember(h(this.chatId,"restrictChatMember"),e,t,r,i)}promoteAuthor(e,t){return this.api.promoteChatMember(h(this.chatId,"promoteAuthor"),h(this.from,"promoteAuthor").id,e,t)}promoteChatMember(e,t,r){return this.api.promoteChatMember(h(this.chatId,"promoteChatMember"),e,t,r)}setChatAdministratorAuthorCustomTitle(e,t){return this.api.setChatAdministratorCustomTitle(h(this.chatId,"setChatAdministratorAuthorCustomTitle"),h(this.from,"setChatAdministratorAuthorCustomTitle").id,e,t)}setChatAdministratorCustomTitle(e,t,r){return this.api.setChatAdministratorCustomTitle(h(this.chatId,"setChatAdministratorCustomTitle"),e,t,r)}banChatSenderChat(e,t){return this.api.banChatSenderChat(h(this.chatId,"banChatSenderChat"),e,t)}unbanChatSenderChat(e,t){return this.api.unbanChatSenderChat(h(this.chatId,"unbanChatSenderChat"),e,t)}setChatPermissions(e,t,r){return this.api.setChatPermissions(h(this.chatId,"setChatPermissions"),e,t,r)}exportChatInviteLink(e){return this.api.exportChatInviteLink(h(this.chatId,"exportChatInviteLink"),e)}createChatInviteLink(e,t){return this.api.createChatInviteLink(h(this.chatId,"createChatInviteLink"),e,t)}editChatInviteLink(e,t,r){return this.api.editChatInviteLink(h(this.chatId,"editChatInviteLink"),e,t,r)}createChatSubscriptionInviteLink(e,t,r,i){return this.api.createChatSubscriptionInviteLink(h(this.chatId,"createChatSubscriptionInviteLink"),e,t,r,i)}editChatSubscriptionInviteLink(e,t,r){return this.api.editChatSubscriptionInviteLink(h(this.chatId,"editChatSubscriptionInviteLink"),e,t,r)}revokeChatInviteLink(e,t){return this.api.revokeChatInviteLink(h(this.chatId,"editChatInviteLink"),e,t)}approveChatJoinRequest(e,t){return this.api.approveChatJoinRequest(h(this.chatId,"approveChatJoinRequest"),e,t)}declineChatJoinRequest(e,t){return this.api.declineChatJoinRequest(h(this.chatId,"declineChatJoinRequest"),e,t)}setChatPhoto(e,t){return this.api.setChatPhoto(h(this.chatId,"setChatPhoto"),e,t)}deleteChatPhoto(e){return this.api.deleteChatPhoto(h(this.chatId,"deleteChatPhoto"),e)}setChatTitle(e,t){return this.api.setChatTitle(h(this.chatId,"setChatTitle"),e,t)}setChatDescription(e,t){return this.api.setChatDescription(h(this.chatId,"setChatDescription"),e,t)}pinChatMessage(e,t,r){return this.api.pinChatMessage(h(this.chatId,"pinChatMessage"),e,t,r)}unpinChatMessage(e,t){return this.api.unpinChatMessage(h(this.chatId,"unpinChatMessage"),e,t)}unpinAllChatMessages(e){return this.api.unpinAllChatMessages(h(this.chatId,"unpinAllChatMessages"),e)}leaveChat(e){return this.api.leaveChat(h(this.chatId,"leaveChat"),e)}getChat(e){return this.api.getChat(h(this.chatId,"getChat"),e)}getChatAdministrators(e){return this.api.getChatAdministrators(h(this.chatId,"getChatAdministrators"),e)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e){return this.api.getChatMemberCount(h(this.chatId,"getChatMemberCount"),e)}getAuthor(e){return this.api.getChatMember(h(this.chatId,"getAuthor"),h(this.from,"getAuthor").id,e)}getChatMember(e,t){return this.api.getChatMember(h(this.chatId,"getChatMember"),e,t)}setChatStickerSet(e,t){return this.api.setChatStickerSet(h(this.chatId,"setChatStickerSet"),e,t)}deleteChatStickerSet(e){return this.api.deleteChatStickerSet(h(this.chatId,"deleteChatStickerSet"),e)}createForumTopic(e,t,r){return this.api.createForumTopic(h(this.chatId,"createForumTopic"),e,t,r)}editForumTopic(e,t){const r=h(this.msg,"editForumTopic"),i=h(r.message_thread_id,"editForumTopic");return this.api.editForumTopic(r.chat.id,i,e,t)}closeForumTopic(e){const t=h(this.msg,"closeForumTopic"),r=h(t.message_thread_id,"closeForumTopic");return this.api.closeForumTopic(t.chat.id,r,e)}reopenForumTopic(e){const t=h(this.msg,"reopenForumTopic"),r=h(t.message_thread_id,"reopenForumTopic");return this.api.reopenForumTopic(t.chat.id,r,e)}deleteForumTopic(e){const t=h(this.msg,"deleteForumTopic"),r=h(t.message_thread_id,"deleteForumTopic");return this.api.deleteForumTopic(t.chat.id,r,e)}unpinAllForumTopicMessages(e){const t=h(this.msg,"unpinAllForumTopicMessages"),r=h(t.message_thread_id,"unpinAllForumTopicMessages");return this.api.unpinAllForumTopicMessages(t.chat.id,r,e)}editGeneralForumTopic(e,t){return this.api.editGeneralForumTopic(h(this.chatId,"editGeneralForumTopic"),e,t)}closeGeneralForumTopic(e){return this.api.closeGeneralForumTopic(h(this.chatId,"closeGeneralForumTopic"),e)}reopenGeneralForumTopic(e){return this.api.reopenGeneralForumTopic(h(this.chatId,"reopenGeneralForumTopic"),e)}hideGeneralForumTopic(e){return this.api.hideGeneralForumTopic(h(this.chatId,"hideGeneralForumTopic"),e)}unhideGeneralForumTopic(e){return this.api.unhideGeneralForumTopic(h(this.chatId,"unhideGeneralForumTopic"),e)}unpinAllGeneralForumTopicMessages(e){return this.api.unpinAllGeneralForumTopicMessages(h(this.chatId,"unpinAllGeneralForumTopicMessages"),e)}answerCallbackQuery(e,t){return this.api.answerCallbackQuery(h(this.callbackQuery,"answerCallbackQuery").id,typeof e=="string"?{text:e}:e,t)}setChatMenuButton(e,t){return this.api.setChatMenuButton(e,t)}getChatMenuButton(e,t){return this.api.getChatMenuButton(e,t)}setMyDefaultAdministratorRights(e,t){return this.api.setMyDefaultAdministratorRights(e,t)}getMyDefaultAdministratorRights(e,t){return this.api.getMyDefaultAdministratorRights(e,t)}editMessageText(e,t,r){var s,a,d;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageTextInline(i,e,t):this.api.editMessageText(h(this.chatId,"editMessageText"),h(((s=this.msg)==null?void 0:s.message_id)??((a=this.messageReaction)==null?void 0:a.message_id)??((d=this.messageReactionCount)==null?void 0:d.message_id),"editMessageText"),e,t,r)}editMessageCaption(e,t){var i,s,a;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageCaptionInline(r,e):this.api.editMessageCaption(h(this.chatId,"editMessageCaption"),h(((i=this.msg)==null?void 0:i.message_id)??((s=this.messageReaction)==null?void 0:s.message_id)??((a=this.messageReactionCount)==null?void 0:a.message_id),"editMessageCaption"),e,t)}editMessageMedia(e,t,r){var s,a,d;const i=this.inlineMessageId;return i!==void 0?this.api.editMessageMediaInline(i,e,t):this.api.editMessageMedia(h(this.chatId,"editMessageMedia"),h(((s=this.msg)==null?void 0:s.message_id)??((a=this.messageReaction)==null?void 0:a.message_id)??((d=this.messageReactionCount)==null?void 0:d.message_id),"editMessageMedia"),e,t,r)}editMessageReplyMarkup(e,t){var i,s,a;const r=this.inlineMessageId;return r!==void 0?this.api.editMessageReplyMarkupInline(r,e):this.api.editMessageReplyMarkup(h(this.chatId,"editMessageReplyMarkup"),h(((i=this.msg)==null?void 0:i.message_id)??((s=this.messageReaction)==null?void 0:s.message_id)??((a=this.messageReactionCount)==null?void 0:a.message_id),"editMessageReplyMarkup"),e,t)}stopPoll(e,t){var r,i,s;return this.api.stopPoll(h(this.chatId,"stopPoll"),h(((r=this.msg)==null?void 0:r.message_id)??((i=this.messageReaction)==null?void 0:i.message_id)??((s=this.messageReactionCount)==null?void 0:s.message_id),"stopPoll"),e,t)}deleteMessage(e){var t,r,i;return this.api.deleteMessage(h(this.chatId,"deleteMessage"),h(((t=this.msg)==null?void 0:t.message_id)??((r=this.messageReaction)==null?void 0:r.message_id)??((i=this.messageReactionCount)==null?void 0:i.message_id),"deleteMessage"),e)}deleteMessages(e,t){return this.api.deleteMessages(h(this.chatId,"deleteMessages"),e,t)}replyWithSticker(e,t,r){return this.api.sendSticker(h(this.chatId,"sendSticker"),e,{business_connection_id:this.businessConnectionId,...t},r)}getCustomEmojiStickers(e){var t;return this.api.getCustomEmojiStickers((((t=this.msg)==null?void 0:t.entities)??[]).filter(r=>r.type==="custom_emoji").map(r=>r.custom_emoji_id),e)}replyWithGift(e,t,r){return this.api.sendGift(h(this.from,"sendGift").id,e,t,r)}answerInlineQuery(e,t,r){return this.api.answerInlineQuery(h(this.inlineQuery,"answerInlineQuery").id,e,t,r)}savePreparedInlineMessage(e,t,r){return this.api.savePreparedInlineMessage(h(this.from,"savePreparedInlineMessage").id,e,t,r)}replyWithInvoice(e,t,r,i,s,a,d){return this.api.sendInvoice(h(this.chatId,"sendInvoice"),e,t,r,i,s,a,d)}answerShippingQuery(e,t,r){return this.api.answerShippingQuery(h(this.shippingQuery,"answerShippingQuery").id,e,t,r)}answerPreCheckoutQuery(e,t,r){return this.api.answerPreCheckoutQuery(h(this.preCheckoutQuery,"answerPreCheckoutQuery").id,e,typeof t=="string"?{error_message:t}:t,r)}refundStarPayment(e){var t;return this.api.refundStarPayment(h(this.from,"refundStarPayment").id,h((t=this.msg)==null?void 0:t.successful_payment,"refundStarPayment").telegram_payment_charge_id,e)}editUserStarSubscription(e,t,r){return this.api.editUserStarSubscription(h(this.from,"editUserStarSubscription").id,e,t,r)}verifyUser(e,t){return this.api.verifyUser(h(this.from,"verifyUser").id,e,t)}verifyChat(e,t){return this.api.verifyChat(h(this.chatId,"verifyChat"),e,t)}removeUserVerification(e){return this.api.removeUserVerification(h(this.from,"removeUserVerification").id,e)}removeChatVerification(e){return this.api.removeChatVerification(h(this.chatId,"removeChatVerification"),e)}setPassportDataErrors(e,t){return this.api.setPassportDataErrors(h(this.from,"setPassportDataErrors").id,e,t)}replyWithGame(e,t,r){return this.api.sendGame(h(this.chatId,"sendGame"),e,{business_connection_id:this.businessConnectionId,...t},r)}};b($,"has",ee);let U=$;function h(n,e){if(n===void 0)throw new Error(`Missing information for API call to ${e}`);return n}function ve(n){return It(n).map(e=>typeof e=="string"?t=>t===e?e:null:t=>t.match(e))}function ye(n,e,t){for(const r of t){const i=r(e);if(i)return n.match=i,!0}return!1}function It(n){return Array.isArray(n)?n:[n]}class Gt extends Error{constructor(t,r){super(ws(t));b(this,"error");b(this,"ctx");this.error=t,this.ctx=r,this.name="BotError",t instanceof Error&&(this.stack=t.stack)}}function ws(n){let e;if(n instanceof Error)e=`${n.name} in middleware: ${n.message}`;else{const t=typeof n;switch(e=`Non-error value of type ${t} thrown in middleware`,t){case"bigint":case"boolean":case"number":case"symbol":e+=`: ${n}`;break;case"string":e+=`: ${String(n).substring(0,50)}`;break;default:e+="!";break}}return e}function Ye(n){return typeof n=="function"?n:(e,t)=>n.middleware()(e,t)}function Lr(n,e){return async(t,r)=>{let i=!1;await n(t,async()=>{if(i)throw new Error("`next` already called before!");i=!0,await e(t,r)})}}function Lt(n,e){return e()}const bs=()=>Promise.resolve();async function kn(n,e){await n(e,bs)}class we{constructor(...e){b(this,"handler");this.handler=e.length===0?Lt:e.map(Ye).reduce(Lr)}middleware(){return this.handler}use(...e){const t=new we(...e);return this.handler=Lr(this.handler,Ye(t)),t}on(e,...t){return this.filter(U.has.filterQuery(e),...t)}hears(e,...t){return this.filter(U.has.text(e),...t)}command(e,...t){return this.filter(U.has.command(e),...t)}reaction(e,...t){return this.filter(U.has.reaction(e),...t)}chatType(e,...t){return this.filter(U.has.chatType(e),...t)}callbackQuery(e,...t){return this.filter(U.has.callbackQuery(e),...t)}gameQuery(e,...t){return this.filter(U.has.gameQuery(e),...t)}inlineQuery(e,...t){return this.filter(U.has.inlineQuery(e),...t)}chosenInlineResult(e,...t){return this.filter(U.has.chosenInlineResult(e),...t)}preCheckoutQuery(e,...t){return this.filter(U.has.preCheckoutQuery(e),...t)}shippingQuery(e,...t){return this.filter(U.has.shippingQuery(e),...t)}filter(e,...t){const r=new we(...t);return this.branch(e,r,Lt),r}drop(e,...t){return this.filter(async r=>!await e(r),...t)}fork(...e){const t=new we(...e),r=Ye(t);return this.use((i,s)=>Promise.all([s(),kn(r,i)])),t}lazy(e){return this.use(async(t,r)=>{const i=await e(t),s=Array.isArray(i)?i:[i];await Ye(new we(...s))(t,r)})}route(e,t,r=Lt){return this.lazy(async i=>{const s=await e(i);return(s===void 0||!t[s]?r:t[s])??[]})}branch(e,t,r){return this.lazy(async i=>await e(i)?t:r)}errorBoundary(e,...t){const r=new we(...t),i=Ye(r);return this.use(async(s,a)=>{let d=!1;const o=()=>(d=!0,Promise.resolve());try{await i(s,o)}catch(l){d=!1,await e(new Gt(l,s),o)}d&&await a()}),r}}var Qe=1e3,Oe=Qe*60,qe=Oe*60,Me=qe*24,Cs=Me*7,Ms=Me*365.25,ks=function(n,e){e=e||{};var t=typeof n;if(t==="string"&&n.length>0)return Is(n);if(t==="number"&&isFinite(n))return e.long?Ts(n):Ss(n);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(n))};function Is(n){if(n=String(n),!(n.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(n);if(e){var t=parseFloat(e[1]),r=(e[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return t*Ms;case"weeks":case"week":case"w":return t*Cs;case"days":case"day":case"d":return t*Me;case"hours":case"hour":case"hrs":case"hr":case"h":return t*qe;case"minutes":case"minute":case"mins":case"min":case"m":return t*Oe;case"seconds":case"second":case"secs":case"sec":case"s":return t*Qe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return t;default:return}}}}function Ss(n){var e=Math.abs(n);return e>=Me?Math.round(n/Me)+"d":e>=qe?Math.round(n/qe)+"h":e>=Oe?Math.round(n/Oe)+"m":e>=Qe?Math.round(n/Qe)+"s":n+"ms"}function Ts(n){var e=Math.abs(n);return e>=Me?dt(n,e,Me,"day"):e>=qe?dt(n,e,qe,"hour"):e>=Oe?dt(n,e,Oe,"minute"):e>=Qe?dt(n,e,Qe,"second"):n+" ms"}function dt(n,e,t,r){var i=e>=t*1.5;return Math.round(n/t)+" "+r+(i?"s":"")}function In(){throw new Error("setTimeout has not been defined")}function Sn(){throw new Error("clearTimeout has not been defined")}var he=In,de=Sn,$e;typeof window<"u"?$e=window:typeof self<"u"?$e=self:$e={};typeof $e.setTimeout=="function"&&(he=setTimeout);typeof $e.clearTimeout=="function"&&(de=clearTimeout);function Tn(n){if(he===setTimeout)return setTimeout(n,0);if((he===In||!he)&&setTimeout)return he=setTimeout,setTimeout(n,0);try{return he(n,0)}catch{try{return he.call(null,n,0)}catch{return he.call(this,n,0)}}}function Es(n){if(de===clearTimeout)return clearTimeout(n);if((de===Sn||!de)&&clearTimeout)return de=clearTimeout,clearTimeout(n);try{return de(n)}catch{try{return de.call(null,n)}catch{return de.call(this,n)}}}var ae=[],Ue=!1,Ce,_t=-1;function As(){!Ue||!Ce||(Ue=!1,Ce.length?ae=Ce.concat(ae):_t=-1,ae.length&&En())}function En(){if(!Ue){var n=Tn(As);Ue=!0;for(var e=ae.length;e;){for(Ce=ae,ae=[];++_t<e;)Ce&&Ce[_t].run();_t=-1,e=ae.length}Ce=null,Ue=!1,Es(n)}}function Fs(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];ae.push(new An(n,e)),ae.length===1&&!Ue&&Tn(En)}function An(n,e){this.fun=n,this.array=e}An.prototype.run=function(){this.fun.apply(null,this.array)};var Ps="browser",Rs="browser",xs=!0,Ls=[],js="",Ns={},Ds={},$s={};function Se(){}var Us=Se,Qs=Se,Os=Se,qs=Se,Gs=Se,Bs=Se,Ws=Se;function Vs(n){throw new Error("process.binding is not supported")}function Ys(){return"/"}function Ks(n){throw new Error("process.chdir is not supported")}function Hs(){return 0}var je=$e.performance||{},Js=je.now||je.mozNow||je.msNow||je.oNow||je.webkitNow||function(){return new Date().getTime()};function zs(n){var e=Js.call(je)*.001,t=Math.floor(e),r=Math.floor(e%1*1e9);return n&&(t=t-n[0],r=r-n[1],r<0&&(t--,r+=1e9)),[t,r]}var Zs=new Date;function Xs(){var n=new Date,e=n-Zs;return e/1e3}var jt={nextTick:Fs,title:Ps,browser:xs,env:{NODE_ENV:"production"},argv:Ls,version:js,versions:Ns,on:Us,addListener:Qs,once:Os,off:qs,removeListener:Gs,removeAllListeners:Bs,emit:Ws,binding:Vs,cwd:Ys,chdir:Ks,umask:Hs,hrtime:zs,platform:Rs,release:Ds,config:$s,uptime:Xs};function ea(n,e,t){return t={path:e,exports:{},require:function(r,i){return ta(r,i??t.path)}},n(t,t.exports),t.exports}function ta(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}function ra(n){t.debug=t,t.default=t,t.coerce=o,t.disable=s,t.enable=i,t.enabled=a,t.humanize=ks,t.destroy=l,Object.keys(n).forEach(u=>{t[u]=n[u]}),t.names=[],t.skips=[],t.formatters={};function e(u){let c=0;for(let f=0;f<u.length;f++)c=(c<<5)-c+u.charCodeAt(f),c|=0;return t.colors[Math.abs(c)%t.colors.length]}t.selectColor=e;function t(u){let c,f=null,p,m;function _(...y){if(!_.enabled)return;const w=_,F=Number(new Date),R=F-(c||F);w.diff=R,w.prev=c,w.curr=F,c=F,y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let L=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(k,H)=>{if(k==="%%")return"%";L++;const ne=t.formatters[H];if(typeof ne=="function"){const q=y[L];k=ne.call(w,q),y.splice(L,1),L--}return k}),t.formatArgs.call(w,y),(w.log||t.log).apply(w,y)}return _.namespace=u,_.useColors=t.useColors(),_.color=t.selectColor(u),_.extend=r,_.destroy=t.destroy,Object.defineProperty(_,"enabled",{enumerable:!0,configurable:!1,get:()=>f!==null?f:(p!==t.namespaces&&(p=t.namespaces,m=t.enabled(u)),m),set:y=>{f=y}}),typeof t.init=="function"&&t.init(_),_}function r(u,c){const f=t(this.namespace+(typeof c>"u"?":":c)+u);return f.log=this.log,f}function i(u){t.save(u),t.namespaces=u,t.names=[],t.skips=[];let c;const f=(typeof u=="string"?u:"").split(/[\s,]+/),p=f.length;for(c=0;c<p;c++)f[c]&&(u=f[c].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.slice(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function s(){const u=[...t.names.map(d),...t.skips.map(d).map(c=>"-"+c)].join(",");return t.enable(""),u}function a(u){if(u[u.length-1]==="*")return!0;let c,f;for(c=0,f=t.skips.length;c<f;c++)if(t.skips[c].test(u))return!1;for(c=0,f=t.names.length;c<f;c++)if(t.names[c].test(u))return!0;return!1}function d(u){return u.toString().substring(2,u.toString().length-2).replace(/\.\*\?$/,"*")}function o(u){return u instanceof Error?u.stack||u.message:u}function l(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return t.enable(t.load()),t}var na=ra,N=ea(function(n,e){e.formatArgs=r,e.save=i,e.load=s,e.useColors=t,e.storage=a(),e.destroy=(()=>{let o=!1;return()=>{o||(o=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function t(){return typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs)?!0:typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/)?!1:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function r(o){if(o[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+o[0]+(this.useColors?"%c ":" ")+"+"+n.exports.humanize(this.diff),!this.useColors)return;const l="color: "+this.color;o.splice(1,0,l,"color: inherit");let u=0,c=0;o[0].replace(/%[a-zA-Z%]/g,f=>{f!=="%%"&&(u++,f==="%c"&&(c=u))}),o.splice(c,0,l)}e.log=console.debug||console.log||(()=>{});function i(o){try{o?e.storage.setItem("debug",o):e.storage.removeItem("debug")}catch{}}function s(){let o;try{o=e.storage.getItem("debug")}catch{}return!o&&typeof jt<"u"&&"env"in jt&&(o=jt.env.DEBUG),o}function a(){try{return localStorage}catch{}}n.exports=na(e);const{formatters:d}=n.exports;d.j=function(o){try{return JSON.stringify(o)}catch(l){return"[UnexpectedJSONParseError]: "+l.message}}});N.colors;N.destroy;N.formatArgs;N.load;N.log;N.save;N.storage;N.useColors;const ia=n=>{const e=n[Symbol.asyncIterator]();return new ReadableStream({async pull(t){const r=await e.next();r.done?t.close():t.enqueue(r.value)}})},sa=n=>({}),jr=N("grammy:warn");class ur extends Error{constructor(t,r,i,s){super(`${t} (${r.error_code}: ${r.description})`);b(this,"method");b(this,"payload");b(this,"ok");b(this,"error_code");b(this,"description");b(this,"parameters");this.method=i,this.payload=s,this.ok=!1,this.name="GrammyError",this.error_code=r.error_code,this.description=r.description,this.parameters=r.parameters??{}}}function aa(n,e,t){switch(n.error_code){case 401:jr("Error 401 means that your bot token is wrong, talk to https://t.me/BotFather to check it.");break;case 409:jr("Error 409 means that you are running your bot several times on long polling. Consider revoking the bot token if you believe that no other instance is running.");break}return new ur(`Call to '${e}' failed!`,n,e,t)}class Fn extends Error{constructor(t,r){super(t);b(this,"error");this.error=r,this.name="HttpError"}}function oa(n){return typeof n=="object"&&n!==null&&"status"in n&&"statusText"in n}function ua(n,e){return t=>{let r=`Network request for '${n}' failed!`;throw oa(t)&&(r+=` (${t.status}: ${t.statusText})`),e&&t instanceof Error&&(r+=` ${t.message}`),new Fn(r,t)}}const la=(()=>{var t,r,i;const{Deno:n}=globalThis;if(typeof((t=n==null?void 0:n.build)==null?void 0:t.os)=="string")return n.build.os;const{navigator:e}=globalThis;return(i=(r=e==null?void 0:e.appVersion)==null?void 0:r.includes)!=null&&i.call(r,"Win")?"windows":"linux"})(),ca=la==="windows";function ha(n){if(typeof n!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(n)}`)}function Pn(n,e){if(e.length>=n.length)return n;const t=n.length-e.length;for(let r=e.length-1;r>=0;--r)if(n.charCodeAt(t+r)!==e.charCodeAt(r))return n;return n.slice(0,-e.length)}function Rn(n,e,t=0){let r=!1,i=n.length;for(let s=n.length-1;s>=t;--s)if(e(n.charCodeAt(s))){if(r){t=s+1;break}}else r||(r=!0,i=s+1);return n.slice(t,i)}function xn(n,e){if(ha(n),n.length===0)return n;if(typeof e!="string")throw new TypeError(`Suffix must be a string. Received ${JSON.stringify(e)}`)}function Ln(n,e){if(n.length<=1)return n;let t=n.length;for(let r=n.length-1;r>0&&e(n.charCodeAt(r));r--)t=r;return n.slice(0,t)}function Nr(n){return n===47}function da(n,e=""){xn(n,e);const t=Rn(n,Nr),r=Ln(t,Nr);return e?Pn(r,e):r}function Dr(n){return n===47||n===92}function fa(n){return n>=97&&n<=122||n>=65&&n<=90}function pa(n,e=""){xn(n,e);let t=0;if(n.length>=2){const s=n.charCodeAt(0);fa(s)&&n.charCodeAt(1)===58&&(t=2)}const r=Rn(n,Dr,t),i=Ln(r,Dr);return e?Pn(i,e):i}function ft(n,e=""){return ca?pa(n,e):da(n,e)}class Bt{constructor(e,t){b(this,"consumed",!1);b(this,"fileData");b(this,"filename");this.fileData=e,t??(t=this.guessFilename(e)),this.filename=t}guessFilename(e){if(typeof e=="string")return ft(e);if(typeof e=="object"){if("url"in e)return ft(e.url);if(e instanceof URL)return ft(e.pathname)||ft(e.hostname)}}toRaw(){if(this.consumed)throw new Error("Cannot reuse InputFile data source!");const e=this.fileData;return e instanceof Blob?e.stream():e instanceof URL?$r(e):"url"in e?$r(e.url):(e instanceof Uint8Array||(this.consumed=!0),e)}}async function*$r(n){const{body:e}=await fetch(n);if(e===null)throw new Error(`Download failed, no response body from '${n}'`);yield*e}function Wt(n){return n instanceof Bt||typeof n=="object"&&n!==null&&Object.values(n).some(e=>Array.isArray(e)?e.some(Wt):e instanceof Bt||Wt(e))}function jn(n){return JSON.stringify(n,(e,t)=>t??void 0)}function Ur(n){return{method:"POST",headers:{"content-type":"application/json",connection:"keep-alive"},body:jn(n)}}async function*ma(n,e){try{yield*n}catch(t){e(t)}}function ga(n,e){const t=_a(),r=va(n,t),i=ma(r,e),s=ia(i);return{method:"POST",headers:{"content-type":`multipart/form-data; boundary=${t}`,connection:"keep-alive"},body:s}}function _a(){return"----------"+Nn(32)}function Nn(n=16){return Array.from(Array(n)).map(()=>Math.random().toString(36)[2]||0).join("")}const ze=new TextEncoder;async function*va(n,e){const t=Vt(n);yield ze.encode(`--${e}\r
`);const r=ze.encode(`\r
--${e}\r
`);let i=!0;for(const[s,a]of Object.entries(n))a!=null&&(i||(yield r),yield ya(s,typeof a=="object"?jn(a):a),i=!1);for(const{id:s,origin:a,file:d}of t)i||(yield r),yield*wa(s,a,d),i=!1;yield ze.encode(`\r
--${e}--\r
`)}function Vt(n){return typeof n!="object"||n===null?[]:Object.entries(n).flatMap(([e,t])=>{if(Array.isArray(t))return t.flatMap(r=>Vt(r));if(t instanceof Bt){const r=Nn();Object.assign(n,{[e]:`attach://${r}`});const i=e==="media"&&"type"in n&&typeof n.type=="string"?n.type:e;return{id:r,origin:i,file:t}}else return Vt(t)})}function ya(n,e){return ze.encode(`content-disposition:form-data;name="${n}"\r
\r
${e}`)}async function*wa(n,e,t){const r=t.filename||`${e}.${ba(e)}`;if(r.includes("\r")||r.includes(`
`))throw new Error(`File paths cannot contain carriage-return (\\r) or newline (\\n) characters! Filename for property '${e}' was:
"""
${r}
"""`);yield ze.encode(`content-disposition:form-data;name="${n}";filename=${r}\r
content-type:application/octet-stream\r
\r
`);const i=await t.toRaw();i instanceof Uint8Array?yield i:yield*i}function ba(n){switch(n){case"certificate":return"pem";case"photo":case"thumbnail":return"jpg";case"voice":return"ogg";case"audio":return"mp3";case"animation":case"video":case"video_note":return"mp4";case"sticker":return"webp";default:return"dat"}}const Ca=N("grammy:core");function Ma(n,e){return(t,r,i)=>e(n,t,r,i)}class ka{constructor(e,t={},r={}){b(this,"token");b(this,"webhookReplyEnvelope");b(this,"options");b(this,"fetch");b(this,"hasUsedWebhookReply");b(this,"installedTransformers");b(this,"call");this.token=e,this.webhookReplyEnvelope=r,this.hasUsedWebhookReply=!1,this.installedTransformers=[],this.call=async(o,l,u)=>{const c=l??{};Ca(`Calling ${o}`),u!==void 0&&Pa(o,c,u);const f=this.options,p=Wt(c);if(this.webhookReplyEnvelope.send!==void 0&&!this.hasUsedWebhookReply&&!p&&f.canUseWebhookReply(o)){this.hasUsedWebhookReply=!0;const H=Ur({...c,method:o});return await this.webhookReplyEnvelope.send(H.body),{ok:!0,result:!0}}const m=Fa(u),_=Ea(m,f.timeoutSeconds,o),y=Aa(m),w=f.buildUrl(f.apiRoot,this.token,o,f.environment),F=p?ga(c,H=>y.catch(H)):Ur(c),R=m.signal,L={...f.baseFetchConfig,signal:R,...F},k=[this.fetch(w instanceof URL?w.href:w,L).catch(ua(o,f.sensitiveLogs)),y.promise,_.promise];try{return await(await Promise.race(k)).json()}finally{_.handle!==void 0&&clearTimeout(_.handle)}};const i=t.apiRoot??"https://api.telegram.org",s=t.environment??"prod",{fetch:a}=t,d=a??fetch;if(this.options={apiRoot:i,environment:s,buildUrl:t.buildUrl??Sa,timeoutSeconds:t.timeoutSeconds??500,baseFetchConfig:{...sa(),...t.baseFetchConfig},canUseWebhookReply:t.canUseWebhookReply??(()=>!1),sensitiveLogs:t.sensitiveLogs??!1,fetch:(...o)=>d(...o)},this.fetch=this.options.fetch,this.options.apiRoot.endsWith("/"))throw new Error(`Remove the trailing '/' from the 'apiRoot' option (use '${this.options.apiRoot.substring(0,this.options.apiRoot.length-1)}' instead of '${this.options.apiRoot}')`)}use(...e){return this.call=e.reduce(Ma,this.call),this.installedTransformers.push(...e),this}async callApi(e,t,r){const i=await this.call(e,t,r);if(i.ok)return i.result;throw aa(i,e,t)}}function Ia(n,e,t){const r=new ka(n,e,t),i={get(o,l){return l==="toJSON"?"__internal":l==="getMe"||l==="getWebhookInfo"||l==="getForumTopicIconStickers"||l==="logOut"||l==="close"?r.callApi.bind(r,l,{}):r.callApi.bind(r,l)},...Ta},s=new Proxy({},i),a=r.installedTransformers,d={raw:s,installedTransformers:a,use:(...o)=>(r.use(...o),d)};return d}const Sa=(n,e,t,r)=>`${n}/bot${e}/${r==="test"?"test/":""}${t}`,Ta={set(){return!1},defineProperty(){return!1},deleteProperty(){return!1},ownKeys(){return[]}};function Ea(n,e,t){let r;return{promise:new Promise((s,a)=>{r=setTimeout(()=>{const d=`Request to '${t}' timed out after ${e} seconds`;a(new Error(d)),n.abort()},1e3*e)}),handle:r}}function Aa(n){let e=r=>{throw r};return{promise:new Promise((r,i)=>{e=s=>{i(s),n.abort()}}),catch:e}}function Fa(n){const e=new AbortController;if(n===void 0)return e;const t=n;function r(){e.abort(),t.removeEventListener("abort",r)}return t.aborted?r():t.addEventListener("abort",r),{abort:r,signal:e.signal}}function Pa(n,e,t){if(typeof(t==null?void 0:t.addEventListener)=="function")return;let r=JSON.stringify(e);r.length>20&&(r=r.substring(0,16)+" ...");let i=JSON.stringify(t);throw i.length>20&&(i=i.substring(0,16)+" ..."),new Error(`Incorrect abort signal instance found! You passed two payloads to '${n}' but you should merge the second one containing '${i}' into the first one containing '${r}'! If you are using context shortcuts, you may want to use a method on 'ctx.api' instead.

If you want to prevent such mistakes in the future, consider using TypeScript. https://www.typescriptlang.org/`)}class Qr{constructor(e,t,r){b(this,"token");b(this,"options");b(this,"raw");b(this,"config");this.token=e,this.options=t;const{raw:i,use:s,installedTransformers:a}=Ia(e,t,r);this.raw=i,this.config={use:s,installedTransformers:()=>a.slice()}}getUpdates(e,t){return this.raw.getUpdates({...e},t)}setWebhook(e,t,r){return this.raw.setWebhook({url:e,...t},r)}deleteWebhook(e,t){return this.raw.deleteWebhook({...e},t)}getWebhookInfo(e){return this.raw.getWebhookInfo(e)}getMe(e){return this.raw.getMe(e)}logOut(e){return this.raw.logOut(e)}close(e){return this.raw.close(e)}sendMessage(e,t,r,i){return this.raw.sendMessage({chat_id:e,text:t,...r},i)}forwardMessage(e,t,r,i,s){return this.raw.forwardMessage({chat_id:e,from_chat_id:t,message_id:r,...i},s)}forwardMessages(e,t,r,i,s){return this.raw.forwardMessages({chat_id:e,from_chat_id:t,message_ids:r,...i},s)}copyMessage(e,t,r,i,s){return this.raw.copyMessage({chat_id:e,from_chat_id:t,message_id:r,...i},s)}copyMessages(e,t,r,i,s){return this.raw.copyMessages({chat_id:e,from_chat_id:t,message_ids:r,...i},s)}sendPhoto(e,t,r,i){return this.raw.sendPhoto({chat_id:e,photo:t,...r},i)}sendAudio(e,t,r,i){return this.raw.sendAudio({chat_id:e,audio:t,...r},i)}sendDocument(e,t,r,i){return this.raw.sendDocument({chat_id:e,document:t,...r},i)}sendVideo(e,t,r,i){return this.raw.sendVideo({chat_id:e,video:t,...r},i)}sendAnimation(e,t,r,i){return this.raw.sendAnimation({chat_id:e,animation:t,...r},i)}sendVoice(e,t,r,i){return this.raw.sendVoice({chat_id:e,voice:t,...r},i)}sendVideoNote(e,t,r,i){return this.raw.sendVideoNote({chat_id:e,video_note:t,...r},i)}sendMediaGroup(e,t,r,i){return this.raw.sendMediaGroup({chat_id:e,media:t,...r},i)}sendLocation(e,t,r,i,s){return this.raw.sendLocation({chat_id:e,latitude:t,longitude:r,...i},s)}editMessageLiveLocation(e,t,r,i,s,a){return this.raw.editMessageLiveLocation({chat_id:e,message_id:t,latitude:r,longitude:i,...s},a)}editMessageLiveLocationInline(e,t,r,i,s){return this.raw.editMessageLiveLocation({inline_message_id:e,latitude:t,longitude:r,...i},s)}stopMessageLiveLocation(e,t,r,i){return this.raw.stopMessageLiveLocation({chat_id:e,message_id:t,...r},i)}stopMessageLiveLocationInline(e,t,r){return this.raw.stopMessageLiveLocation({inline_message_id:e,...t},r)}sendPaidMedia(e,t,r,i,s){return this.raw.sendPaidMedia({chat_id:e,star_count:t,media:r,...i},s)}sendVenue(e,t,r,i,s,a,d){return this.raw.sendVenue({chat_id:e,latitude:t,longitude:r,title:i,address:s,...a},d)}sendContact(e,t,r,i,s){return this.raw.sendContact({chat_id:e,phone_number:t,first_name:r,...i},s)}sendPoll(e,t,r,i,s){return this.raw.sendPoll({chat_id:e,question:t,options:r,...i},s)}sendDice(e,t,r,i){return this.raw.sendDice({chat_id:e,emoji:t,...r},i)}setMessageReaction(e,t,r,i,s){return this.raw.setMessageReaction({chat_id:e,message_id:t,reaction:r,...i},s)}sendChatAction(e,t,r,i){return this.raw.sendChatAction({chat_id:e,action:t,...r},i)}getUserProfilePhotos(e,t,r){return this.raw.getUserProfilePhotos({user_id:e,...t},r)}setUserEmojiStatus(e,t,r){return this.raw.setUserEmojiStatus({user_id:e,...t},r)}getUserChatBoosts(e,t,r){return this.raw.getUserChatBoosts({chat_id:e,user_id:t},r)}getBusinessConnection(e,t){return this.raw.getBusinessConnection({business_connection_id:e},t)}getFile(e,t){return this.raw.getFile({file_id:e},t)}kickChatMember(...e){return this.banChatMember(...e)}banChatMember(e,t,r,i){return this.raw.banChatMember({chat_id:e,user_id:t,...r},i)}unbanChatMember(e,t,r,i){return this.raw.unbanChatMember({chat_id:e,user_id:t,...r},i)}restrictChatMember(e,t,r,i,s){return this.raw.restrictChatMember({chat_id:e,user_id:t,permissions:r,...i},s)}promoteChatMember(e,t,r,i){return this.raw.promoteChatMember({chat_id:e,user_id:t,...r},i)}setChatAdministratorCustomTitle(e,t,r,i){return this.raw.setChatAdministratorCustomTitle({chat_id:e,user_id:t,custom_title:r},i)}banChatSenderChat(e,t,r){return this.raw.banChatSenderChat({chat_id:e,sender_chat_id:t},r)}unbanChatSenderChat(e,t,r){return this.raw.unbanChatSenderChat({chat_id:e,sender_chat_id:t},r)}setChatPermissions(e,t,r,i){return this.raw.setChatPermissions({chat_id:e,permissions:t,...r},i)}exportChatInviteLink(e,t){return this.raw.exportChatInviteLink({chat_id:e},t)}createChatInviteLink(e,t,r){return this.raw.createChatInviteLink({chat_id:e,...t},r)}editChatInviteLink(e,t,r,i){return this.raw.editChatInviteLink({chat_id:e,invite_link:t,...r},i)}createChatSubscriptionInviteLink(e,t,r,i,s){return this.raw.createChatSubscriptionInviteLink({chat_id:e,subscription_period:t,subscription_price:r,...i},s)}editChatSubscriptionInviteLink(e,t,r,i){return this.raw.editChatSubscriptionInviteLink({chat_id:e,invite_link:t,...r},i)}revokeChatInviteLink(e,t,r){return this.raw.revokeChatInviteLink({chat_id:e,invite_link:t},r)}approveChatJoinRequest(e,t,r){return this.raw.approveChatJoinRequest({chat_id:e,user_id:t},r)}declineChatJoinRequest(e,t,r){return this.raw.declineChatJoinRequest({chat_id:e,user_id:t},r)}setChatPhoto(e,t,r){return this.raw.setChatPhoto({chat_id:e,photo:t},r)}deleteChatPhoto(e,t){return this.raw.deleteChatPhoto({chat_id:e},t)}setChatTitle(e,t,r){return this.raw.setChatTitle({chat_id:e,title:t},r)}setChatDescription(e,t,r){return this.raw.setChatDescription({chat_id:e,description:t},r)}pinChatMessage(e,t,r,i){return this.raw.pinChatMessage({chat_id:e,message_id:t,...r},i)}unpinChatMessage(e,t,r){return this.raw.unpinChatMessage({chat_id:e,message_id:t},r)}unpinAllChatMessages(e,t){return this.raw.unpinAllChatMessages({chat_id:e},t)}leaveChat(e,t){return this.raw.leaveChat({chat_id:e},t)}getChat(e,t){return this.raw.getChat({chat_id:e},t)}getChatAdministrators(e,t){return this.raw.getChatAdministrators({chat_id:e},t)}getChatMembersCount(...e){return this.getChatMemberCount(...e)}getChatMemberCount(e,t){return this.raw.getChatMemberCount({chat_id:e},t)}getChatMember(e,t,r){return this.raw.getChatMember({chat_id:e,user_id:t},r)}setChatStickerSet(e,t,r){return this.raw.setChatStickerSet({chat_id:e,sticker_set_name:t},r)}deleteChatStickerSet(e,t){return this.raw.deleteChatStickerSet({chat_id:e},t)}getForumTopicIconStickers(e){return this.raw.getForumTopicIconStickers(e)}createForumTopic(e,t,r,i){return this.raw.createForumTopic({chat_id:e,name:t,...r},i)}editForumTopic(e,t,r,i){return this.raw.editForumTopic({chat_id:e,message_thread_id:t,...r},i)}closeForumTopic(e,t,r){return this.raw.closeForumTopic({chat_id:e,message_thread_id:t},r)}reopenForumTopic(e,t,r){return this.raw.reopenForumTopic({chat_id:e,message_thread_id:t},r)}deleteForumTopic(e,t,r){return this.raw.deleteForumTopic({chat_id:e,message_thread_id:t},r)}unpinAllForumTopicMessages(e,t,r){return this.raw.unpinAllForumTopicMessages({chat_id:e,message_thread_id:t},r)}editGeneralForumTopic(e,t,r){return this.raw.editGeneralForumTopic({chat_id:e,name:t},r)}closeGeneralForumTopic(e,t){return this.raw.closeGeneralForumTopic({chat_id:e},t)}reopenGeneralForumTopic(e,t){return this.raw.reopenGeneralForumTopic({chat_id:e},t)}hideGeneralForumTopic(e,t){return this.raw.hideGeneralForumTopic({chat_id:e},t)}unhideGeneralForumTopic(e,t){return this.raw.unhideGeneralForumTopic({chat_id:e},t)}unpinAllGeneralForumTopicMessages(e,t){return this.raw.unpinAllGeneralForumTopicMessages({chat_id:e},t)}answerCallbackQuery(e,t,r){return this.raw.answerCallbackQuery({callback_query_id:e,...t},r)}setMyName(e,t,r){return this.raw.setMyName({name:e,...t},r)}getMyName(e,t){return this.raw.getMyName(e??{},t)}setMyCommands(e,t,r){return this.raw.setMyCommands({commands:e,...t},r)}deleteMyCommands(e,t){return this.raw.deleteMyCommands({...e},t)}getMyCommands(e,t){return this.raw.getMyCommands({...e},t)}setMyDescription(e,t,r){return this.raw.setMyDescription({description:e,...t},r)}getMyDescription(e,t){return this.raw.getMyDescription({...e},t)}setMyShortDescription(e,t,r){return this.raw.setMyShortDescription({short_description:e,...t},r)}getMyShortDescription(e,t){return this.raw.getMyShortDescription({...e},t)}setChatMenuButton(e,t){return this.raw.setChatMenuButton({...e},t)}getChatMenuButton(e,t){return this.raw.getChatMenuButton({...e},t)}setMyDefaultAdministratorRights(e,t){return this.raw.setMyDefaultAdministratorRights({...e},t)}getMyDefaultAdministratorRights(e,t){return this.raw.getMyDefaultAdministratorRights({...e},t)}editMessageText(e,t,r,i,s){return this.raw.editMessageText({chat_id:e,message_id:t,text:r,...i},s)}editMessageTextInline(e,t,r,i){return this.raw.editMessageText({inline_message_id:e,text:t,...r},i)}editMessageCaption(e,t,r,i){return this.raw.editMessageCaption({chat_id:e,message_id:t,...r},i)}editMessageCaptionInline(e,t,r){return this.raw.editMessageCaption({inline_message_id:e,...t},r)}editMessageMedia(e,t,r,i,s){return this.raw.editMessageMedia({chat_id:e,message_id:t,media:r,...i},s)}editMessageMediaInline(e,t,r,i){return this.raw.editMessageMedia({inline_message_id:e,media:t,...r},i)}editMessageReplyMarkup(e,t,r,i){return this.raw.editMessageReplyMarkup({chat_id:e,message_id:t,...r},i)}editMessageReplyMarkupInline(e,t,r){return this.raw.editMessageReplyMarkup({inline_message_id:e,...t},r)}stopPoll(e,t,r,i){return this.raw.stopPoll({chat_id:e,message_id:t,...r},i)}deleteMessage(e,t,r){return this.raw.deleteMessage({chat_id:e,message_id:t},r)}deleteMessages(e,t,r){return this.raw.deleteMessages({chat_id:e,message_ids:t},r)}sendSticker(e,t,r,i){return this.raw.sendSticker({chat_id:e,sticker:t,...r},i)}getStickerSet(e,t){return this.raw.getStickerSet({name:e},t)}getCustomEmojiStickers(e,t){return this.raw.getCustomEmojiStickers({custom_emoji_ids:e},t)}uploadStickerFile(e,t,r,i){return this.raw.uploadStickerFile({user_id:e,sticker_format:t,sticker:r},i)}createNewStickerSet(e,t,r,i,s,a){return this.raw.createNewStickerSet({user_id:e,name:t,title:r,stickers:i,...s},a)}addStickerToSet(e,t,r,i){return this.raw.addStickerToSet({user_id:e,name:t,sticker:r},i)}setStickerPositionInSet(e,t,r){return this.raw.setStickerPositionInSet({sticker:e,position:t},r)}deleteStickerFromSet(e,t){return this.raw.deleteStickerFromSet({sticker:e},t)}replaceStickerInSet(e,t,r,i,s){return this.raw.replaceStickerInSet({user_id:e,name:t,old_sticker:r,sticker:i},s)}setStickerEmojiList(e,t,r){return this.raw.setStickerEmojiList({sticker:e,emoji_list:t},r)}setStickerKeywords(e,t,r){return this.raw.setStickerKeywords({sticker:e,keywords:t},r)}setStickerMaskPosition(e,t,r){return this.raw.setStickerMaskPosition({sticker:e,mask_position:t},r)}setStickerSetTitle(e,t,r){return this.raw.setStickerSetTitle({name:e,title:t},r)}deleteStickerSet(e,t){return this.raw.deleteStickerSet({name:e},t)}setStickerSetThumbnail(e,t,r,i,s){return this.raw.setStickerSetThumbnail({name:e,user_id:t,thumbnail:r,format:i},s)}setCustomEmojiStickerSetThumbnail(e,t,r){return this.raw.setCustomEmojiStickerSetThumbnail({name:e,custom_emoji_id:t},r)}getAvailableGifts(e){return this.raw.getAvailableGifts(e)}sendGift(e,t,r,i){return this.raw.sendGift({user_id:e,gift_id:t,...r},i)}answerInlineQuery(e,t,r,i){return this.raw.answerInlineQuery({inline_query_id:e,results:t,...r},i)}answerWebAppQuery(e,t,r){return this.raw.answerWebAppQuery({web_app_query_id:e,result:t},r)}savePreparedInlineMessage(e,t,r,i){return this.raw.savePreparedInlineMessage({user_id:e,result:t,...r},i)}sendInvoice(e,t,r,i,s,a,d,o){return this.raw.sendInvoice({chat_id:e,title:t,description:r,payload:i,currency:s,prices:a,...d},o)}createInvoiceLink(e,t,r,i,s,a,d,o){return this.raw.createInvoiceLink({title:e,description:t,payload:r,provider_token:i,currency:s,prices:a,...d},o)}answerShippingQuery(e,t,r,i){return this.raw.answerShippingQuery({shipping_query_id:e,ok:t,...r},i)}answerPreCheckoutQuery(e,t,r,i){return this.raw.answerPreCheckoutQuery({pre_checkout_query_id:e,ok:t,...r},i)}getStarTransactions(e,t){return this.raw.getStarTransactions({...e},t)}refundStarPayment(e,t,r){return this.raw.refundStarPayment({user_id:e,telegram_payment_charge_id:t},r)}editUserStarSubscription(e,t,r,i){return this.raw.editUserStarSubscription({user_id:e,telegram_payment_charge_id:t,is_canceled:r},i)}verifyUser(e,t,r){return this.raw.verifyUser({user_id:e,...t},r)}verifyChat(e,t,r){return this.raw.verifyChat({chat_id:e,...t},r)}removeUserVerification(e,t){return this.raw.removeUserVerification({user_id:e},t)}removeChatVerification(e,t){return this.raw.removeChatVerification({chat_id:e},t)}setPassportDataErrors(e,t,r){return this.raw.setPassportDataErrors({user_id:e,errors:t},r)}sendGame(e,t,r,i){return this.raw.sendGame({chat_id:e,game_short_name:t,...r},i)}setGameScore(e,t,r,i,s,a){return this.raw.setGameScore({chat_id:e,message_id:t,user_id:r,score:i,...s},a)}setGameScoreInline(e,t,r,i,s){return this.raw.setGameScore({inline_message_id:e,user_id:t,score:r,...i},s)}getGameHighScores(e,t,r,i){return this.raw.getGameHighScores({chat_id:e,message_id:t,user_id:r},i)}getGameHighScoresInline(e,t,r){return this.raw.getGameHighScores({inline_message_id:e,user_id:t},r)}}const X=N("grammy:bot"),Ra=N("grammy:warn"),Ne=N("grammy:error"),Dn=["message","edited_message","channel_post","edited_channel_post","business_connection","business_message","edited_business_message","deleted_business_messages","inline_query","chosen_inline_result","callback_query","shipping_query","pre_checkout_query","poll","poll_answer","my_chat_member","chat_join_request","chat_boost","removed_chat_boost"];class xa extends we{constructor(t,r){super();b(this,"token");b(this,"pollingRunning");b(this,"pollingAbortController");b(this,"lastTriedUpdateId");b(this,"api");b(this,"me");b(this,"mePromise");b(this,"clientConfig");b(this,"ContextConstructor");b(this,"observedUpdateTypes");b(this,"errorHandler");if(this.token=t,this.pollingRunning=!1,this.lastTriedUpdateId=0,this.observedUpdateTypes=new Set,this.errorHandler=async i=>{var s,a;throw console.error("Error in middleware while handling update",(a=(s=i.ctx)==null?void 0:s.update)==null?void 0:a.update_id,i.error),console.error("No error handler was set!"),console.error("Set your own error handler with `bot.catch = ...`"),this.pollingRunning&&(console.error("Stopping bot"),await this.stop()),i},!t)throw new Error("Empty token!");this.me=r==null?void 0:r.botInfo,this.clientConfig=r==null?void 0:r.client,this.ContextConstructor=(r==null?void 0:r.ContextConstructor)??U,this.api=new Qr(t,this.clientConfig)}set botInfo(t){this.me=t}get botInfo(){if(this.me===void 0)throw new Error("Bot information unavailable! Make sure to call `await bot.init()` before accessing `bot.botInfo`!");return this.me}on(t,...r){for(const[i]of bn(t).flatMap(Cn))this.observedUpdateTypes.add(i);return super.on(t,...r)}reaction(t,...r){return this.observedUpdateTypes.add("message_reaction"),super.reaction(t,...r)}isInited(){return this.me!==void 0}async init(t){if(!this.isInited()){X("Initializing bot"),this.mePromise??(this.mePromise=Or(()=>this.api.getMe(t),t));let r;try{r=await this.mePromise}finally{this.mePromise=void 0}this.me===void 0?this.me=r:X("Bot info was set by now, will not overwrite")}X(`I am ${this.me.username}!`)}async handleUpdates(t){for(const r of t){this.lastTriedUpdateId=r.update_id;try{await this.handleUpdate(r)}catch(i){if(i instanceof Gt)await this.errorHandler(i);else throw console.error("FATAL: grammY unable to handle:",i),i}}}async handleUpdate(t,r){if(this.me===void 0)throw new Error("Bot not initialized! Either call `await bot.init()`, or directly set the `botInfo` option in the `Bot` constructor to specify a known bot info object.");X(`Processing update ${t.update_id}`);const i=new Qr(this.token,this.clientConfig,r),s=this.api.config.installedTransformers();s.length>0&&i.config.use(...s);const a=new this.ContextConstructor(t,i,this.me);try{await kn(this.middleware(),a)}catch(d){throw Ne(`Error in middleware for update ${t.update_id}`),new Gt(d,a)}}async start(t){var i,s,a;const r=[];if(this.isInited()||r.push(this.init((i=this.pollingAbortController)==null?void 0:i.signal)),this.pollingRunning){await Promise.all(r),X("Simple long polling already running!");return}this.pollingRunning=!0,this.pollingAbortController=new AbortController;try{r.push(Or(async()=>{var d;await this.api.deleteWebhook({drop_pending_updates:t==null?void 0:t.drop_pending_updates},(d=this.pollingAbortController)==null?void 0:d.signal)},(s=this.pollingAbortController)==null?void 0:s.signal)),await Promise.all(r),await((a=t==null?void 0:t.onStart)==null?void 0:a.call(t,this.botInfo))}catch(d){throw this.pollingRunning=!1,this.pollingAbortController=void 0,d}this.pollingRunning&&(La(this.observedUpdateTypes,t==null?void 0:t.allowed_updates),this.use=ja,X("Starting simple long polling"),await this.loop(t),X("Middleware is done running"))}async stop(){var t;if(this.pollingRunning){X("Stopping bot, saving update offset"),this.pollingRunning=!1,(t=this.pollingAbortController)==null||t.abort();const r=this.lastTriedUpdateId+1;await this.api.getUpdates({offset:r,limit:1}).finally(()=>this.pollingAbortController=void 0)}else X("Bot is not running!")}isRunning(){return this.pollingRunning}catch(t){this.errorHandler=t}async loop(t){const r=t==null?void 0:t.limit,i=(t==null?void 0:t.timeout)??30;let s=(t==null?void 0:t.allowed_updates)??[];try{for(;this.pollingRunning;){const a=await this.fetchUpdates({limit:r,timeout:i,allowed_updates:s});if(a===void 0)break;await this.handleUpdates(a),s=void 0}}finally{this.pollingRunning=!1}}async fetchUpdates({limit:t,timeout:r,allowed_updates:i}){var d;const s=this.lastTriedUpdateId+1;let a;do try{a=await this.api.getUpdates({offset:s,limit:t,timeout:r,allowed_updates:i},(d=this.pollingAbortController)==null?void 0:d.signal)}catch(o){await this.handlePollingError(o)}while(a===void 0&&this.pollingRunning);return a}async handlePollingError(t){if(!this.pollingRunning){X("Pending getUpdates request cancelled");return}let r=3;if(t instanceof ur){if(Ne(t.message),t.error_code===401||t.error_code===409)throw t;t.error_code===429&&(Ne("Bot API server is closing."),r=t.parameters.retry_after??r)}else Ne(t);Ne(`Call to getUpdates failed, retrying in ${r} seconds ...`),await Yt(r)}}async function Or(n,e){let r=50;async function i(a){let d=!1,o="rethrow";if(a instanceof Fn)d=!0,o="retry";else if(a instanceof ur){if(a.error_code>=500)d=!0,o="retry";else if(a.error_code===429){const l=a.parameters.retry_after;typeof l=="number"?(await Yt(l,e),r=50):d=!0,o="retry"}}if(d){r!==50&&await Yt(r,e);const l=20*60*1e3;r=Math.min(l,2*r)}return o}let s={ok:!1};for(;!s.ok;)try{s={ok:!0,value:await n()}}catch(a){switch(Ne(a),await i(a)){case"retry":continue;case"rethrow":throw a}}return s.value}async function Yt(n,e){let t,r;function i(){r==null||r(new Error("Aborted delay")),t!==void 0&&clearTimeout(t)}try{await new Promise((s,a)=>{if(r=a,e!=null&&e.aborted){i();return}e==null||e.addEventListener("abort",i),t=setTimeout(s,1e3*n)})}finally{e==null||e.removeEventListener("abort",i)}}function La(n,e=Dn){const t=Array.from(n).filter(r=>!e.includes(r));t.length>0&&Ra(`You registered listeners for the following update types, but you did not specify them in \`allowed_updates\` so they may not be received: ${t.map(r=>`'${r}'`).join(", ")}`)}function ja(){throw new Error(`It looks like you are registering more listeners on your bot from within other listeners! This means that every time your bot handles a message like this one, new listeners will be added. This list grows until your machine crashes, so grammY throws this error to tell you that you should probably do things a bit differently. If you're unsure how to resolve this problem, you can ask in the group chat: https://telegram.me/grammyjs

On the other hand, if you actually know what you're doing and you do need to install further middleware while your bot is running, consider installing a composer instance on your bot, and in turn augment the composer after the fact. This way, you can circumvent this protection against memory leaks.`)}[...Dn];N("grammy:session");N("grammy:error");const Na=(n,e)=>{E(e,!g(e))};var Da=(n,e)=>E(e,!g(e)),$a=Ie('<div class="bg-gray-50 p-4 rounded-lg mb-4"><h2 class="text-lg font-semibold mb-2">Bot Information</h2> <p><strong>ID:</strong> </p> <p><strong>Name:</strong> </p> <p><strong>Username:</strong> </p> <p><strong>Can Join Groups:</strong> </p> <p><strong>Can Read Group Messages:</strong> </p></div>'),Ua=(n,e)=>e(),Qa=(n,e)=>e(),Oa=Ie('<div class="p-4 bg-white border-b"><div class="mb-4"><!></div> <div class="flex gap-2"><input class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-green-500" type="text" placeholder="Enter new bot token..."> <button class="bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors">Update Token</button> <button class="bg-red-500 text-white px-6 py-2 rounded-lg hover:bg-red-600 transition-colors">Clear Data</button></div></div>'),qa=(n,e,t,r)=>{e(g(t).id),window.innerWidth<768&&E(r,!1)},Ga=Ie('<span class="bg-green-500 text-white text-xs px-2 py-1 rounded-full"> </span>'),Ba=Ie('<div><div class="flex justify-between items-center"><span class="font-medium truncate"> </span> <!></div></div>'),Wa=Ie('<div style="max-width: 70%"><div><span> </span> <span class="text-gray-500 text-sm ml-2"> </span></div> <p> </p></div>'),Va=Ie('<button class="fixed bottom-24 right-8 bg-gray-800 text-white p-2 rounded-full shadow-lg hover:bg-gray-700" aria-label="Scroll to bottom"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 14l-7 7m0 0l-7-7m7 7V3"></path></svg></button>'),Ya=(n,e)=>e(),Ka=Ie('<div class="flex flex-col h-screen max-h-screen max-w-screen overflow-hidden"><div class="flex justify-between items-center p-4 bg-white border-b"><div class="flex items-center gap-2"><button class="md:hidden p-2 hover:bg-gray-100 rounded-lg" aria-label="Toggle sidebar"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button> <h1 class="text-lg font-medium"> </h1></div> <button class="px-4 py-2 text-sm bg-gray-200 rounded-lg hover:bg-gray-300">Settings</button></div> <!> <div class="flex flex-1 overflow-hidden"><div></div> <div class="flex-1 flex flex-col min-h-0 max-w-full md:max-w-[calc(100vw-16rem)]"><div class="flex-1 overflow-y-auto p-4 bg-gray-100 relative"><!> <!></div> <div class="p-4 bg-white border-t"><div class="flex gap-2"><input class="flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:border-green-500" type="text" placeholder="Type a message..."> <button class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors">Send</button></div></div></div></div></div>');function Ha(n,e){_n(e,!0);const t=()=>{const v=prompt("Enter your bot token:");return localStorage.setItem("token",v),v};let r=Z(x(localStorage.getItem("token")||t())),i=Z(!1),s=Z(!1),a=Z(null);const d=new xa(g(r)),o=v=>{const C=localStorage.getItem(`bot_${v}`);return C?JSON.parse(C):{messages:{},chats:[],currentChat:""}},l=()=>{const v={messages:g(f),chats:g(p),currentChat:g(y)};localStorage.setItem(`bot_${g(r)}`,JSON.stringify(v))},u=async()=>{var v;try{E(a,x(await d.api.getMe())),document.title=((v=g(a))==null?void 0:v.first_name)+" - Bottelegram"||"Bottelegram"}catch(C){console.error("Error fetching bot info:",C)}},c=o(g(r));let f=Z(x(c.messages)),p=Z(x(c.chats)),m=Z(void 0),_=Z(""),y=Z(x(c.currentChat)),w;const F=(v,C)=>{Notification.permission==="granted"?new Notification(v,{body:C}):Notification.permission!=="denied"&&Notification.requestPermission().then(I=>{I==="granted"&&new Notification(v,{body:C})})};Fi(()=>(u(),d.command("start",v=>v.reply(`Welcome! This bot is powered by 
      https://bottelegram.web.app

    Channel: @contentdownload

    Group: @contentdownload_group`)),d.on("message",async v=>{E(m,x(v)),localStorage.setItem("context",JSON.stringify(v));let C={...v.message,notification:!0};const I=v.chat.id.toString(),J=v.chat.title||v.chat.first_name||I;g(f)[I]||(g(f)[I]=[]),g(f)[I]=[...g(f)[I],C],l(),g(p).find(W=>W.id===I)?I!==g(y)&&E(p,x(g(p).map(W=>W.id===I?{...W,unread:(W.unread||0)+1,hasNotification:!0}:W))):E(p,x([...g(p),{id:I,name:J,unread:I!==g(y)?1:0,hasNotification:I!==g(y)}])),l(),g(y)||(E(y,x(I)),l()),I!==g(y)&&F(J,C.text||"")}),d.start(),()=>{d.stop()}));const R=()=>{if(!g(_).trim())return;const v={from:{first_name:"You"},date:Math.floor(Date.now()/1e3),text:g(_),sent_by_me:!0,notification:!1};g(f)[g(y)]||(g(f)[g(y)]=[]),g(f)[g(y)]=[...g(f)[g(y)],v],l(),d.api.sendMessage(g(y),g(_)),E(_,""),q()},L=()=>{localStorage.setItem("token",g(r)),window.location.reload()},M=()=>{localStorage.removeItem(`bot_${g(r)}`),E(f,x({})),E(p,x([])),E(y,"")},k=v=>{E(y,x(v)),E(p,x(g(p).map(C=>C.id===v?{...C,unread:0,hasNotification:!1}:C))),l()},H=v=>{v.key==="Enter"&&!v.shiftKey&&(v.preventDefault(),R())},ne=()=>{if(!w)return;const{scrollTop:v,scrollHeight:C,clientHeight:I}=w;E(s,C-v-I>100)},q=()=>{w&&(w.scrollTop=w.scrollHeight)};let Te=Z(window.innerWidth>768);var Ee=Ka(),le=T(Ee),Ae=T(le),nt=T(Ae);nt.__click=[Na,Te];var it=P(nt,2),st=T(it),at=P(Ae,2);at.__click=[Da,i];var Ve=P(le,2);{var ot=v=>{var C=Oa(),I=T(C),J=T(I);{var ie=z=>{var lt=$a(),cr=P(T(lt),2),Wn=P(T(cr)),hr=P(cr,2),Vn=P(T(hr)),dr=P(hr,2),Yn=P(T(dr)),fr=P(dr,2),Kn=P(T(fr)),Hn=P(fr,2),Jn=P(T(Hn));Re(()=>{Y(Wn,` ${g(a).id??""}`),Y(Vn,` ${g(a).first_name??""}`),Y(Yn,` @${g(a).username??""}`),Y(Kn,` ${(g(a).can_join_groups?"Yes":"No")??""}`),Y(Jn,` ${(g(a).can_read_all_group_messages?"Yes":"No")??""}`)}),_e(z,lt)};ct(J,z=>{g(a)&&z(ie)})}var W=P(I,2),Fe=T(W),Pe=P(Fe,2);Pe.__click=[Ua,L];var ce=P(Pe,2);ce.__click=[Qa,M],kr(Fe,()=>g(r),z=>E(r,z)),_e(v,C)};ct(Ve,v=>{g(i)&&v(ot)})}var $n=P(Ve,2),Et=T($n);Cr(Et,21,()=>g(p),br,(v,C)=>{var I=Ba();I.__click=[qa,k,C,Te];var J=T(I),ie=T(J),W=T(ie),Fe=P(ie,2);{var Pe=ce=>{var z=Ga(),lt=T(z);Re(()=>Y(lt,g(C).unread)),_e(ce,z)};ct(Fe,ce=>{g(C).unread&&ce(Pe)})}Re(()=>{Le(I,`p-3 cursor-pointer hover:bg-gray-100 ${(g(y)===g(C).id?"bg-gray-200":"")??""} ${(g(C).hasNotification?"bg-yellow-50":"")??""}`),Y(W,g(C).name)}),_e(v,I)});var Un=P(Et,2),ut=T(Un),lr=T(ut);Cr(lr,17,()=>g(f)[g(y)]||[],br,(v,C)=>{var I=Wa(),J=T(I),ie=T(J),W=T(ie),Fe=P(ie,2),Pe=T(Fe);Re(()=>Y(Pe,new Date(g(C).date*1e3).toLocaleTimeString()));var ce=P(J,2),z=T(ce);Re(()=>{Le(I,`mb-4 ${(g(C).sent_by_me?"ml-auto":"")??""}`),Le(J,`flex items-center mb-1 ${(g(C).sent_by_me?"justify-end":"")??""}`),Le(ie,`font-bold ${(g(C).sent_by_me?"text-blue-600":"text-green-600")??""}`),Y(W,g(C).from.first_name),Le(ce,`p-3 rounded-lg shadow-sm break-words overflow-wrap-anywhere ${(g(C).sent_by_me?"bg-blue-100":g(C).notification?"bg-yellow-50":"bg-white")??""}`),Y(z,g(C).text)}),_e(v,I)});var Qn=P(lr,2);{var On=v=>{var C=Va();C.__click=q,_e(v,C)};ct(Qn,v=>{g(s)&&v(On)})}as(ut,v=>w=v,()=>w);var qn=P(ut,2),Gn=T(qn),At=T(Gn),Bn=P(At,2);Bn.__click=[Ya,R],Re(()=>{var v;Y(st,(v=g(a))==null?void 0:v.first_name),Le(Et,`${(g(Te)?"block":"hidden")??""} md:block w-64 bg-gray-50 border-r overflow-y-auto absolute md:relative z-10`)}),wr("scroll",ut,ne),wr("keypress",At,H),kr(At,()=>g(_),v=>E(_,v)),_e(n,Ee),vn()}Hi(["click"]);Zi(Ha,{target:document.getElementById("app")});
